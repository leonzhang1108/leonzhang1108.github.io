webpackJsonp([24],{157:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(168),r=t.n(a),o=function(){return function(e){var n=e.draw,t=e.size,a=e.volume,o=e.currentTime,i=this;this.initAC=function(){i.ac=new AudioContext,i.gainNode=i.ac.createGain(),i.gainNode.gain.value=i.volume,i.gainNode.connect(i.ac.destination),i.analyser=i.ac.createAnalyser(),i.analyser.fftSize=2*i.size,i.analyser.connect(i.gainNode)},this.load=function(e,n,t){i.abort(),r()({url:e,responseType:"arraybuffer",onDownloadProgress:function(e){var n=e.loaded,a=e.total;t(n/a*100)},cancelToken:new r.a.CancelToken(function(e){i.axiosCancellation=e})}).then(function(e){n(e.data)}).catch(function(e){r.a.isCancel(e)?console.log("Request canceled",e.message):t("error")})},this.abort=function(){return i.axiosCancellation&&i.axiosCancellation("abort")},this.play=function(e){var n=e.src,t=e.cb,a=e.progressCb,r=++i.count;i.source&&i.source.stop();var o=function(e){if(i.buffer=e,r===i.count&&i.ac)try{i.createBufferSource({buffer:e},t)}catch(e){console.log(e)}};n instanceof ArrayBuffer?i.ac.decodeAudioData(n,o):i.load(n,function(e){i.ac.decodeAudioData(e,o)},a)},this.createBufferSource=function(e,n){var t=e.buffer,a=e.start,r=void 0===a?0:a;if(i.source&&i.source.stop(),i.buffer){var o=i.ac.createBufferSource();o.buffer=i.buffer=t,o.loop=!0,o.connect(i.analyser),o.start(0,r),i.source=o,i.visualize(),n&&n()}},this.updateVolume=function(e){console.log(e),i.gainNode.gain.value=i.volume=e},this.visualize=function(){var e=new Uint8Array(i.analyser.frequencyBinCount),n=window.requestAnimationFrame,t=function(){i.analyser.getByteFrequencyData(e),i.draw(e,i.volume),i.rafId=n(t)};t()},this.setCurrent=function(e){void 0===e&&(e=0);var n=i.buffer;i.curr=0,i.createBufferSource({buffer:n,start:e}),i.setInterval(!0)},this.setInterval=function(e){i.interval&&clearInterval(i.interval),e&&i.setCurrTime(e),i.interval=setInterval(function(){i.setCurrTime()},1e3)},this.setCurrTime=function(e){var n=i.buffer?i.buffer.duration.toFixed(0):0;i.currentTime({curr:e?0:++i.curr,total:n})},this.pause=function(){i.ac.suspend(),window.cancelAnimationFrame(i.rafId),i.interval&&clearInterval(i.interval)},this.resume=function(){i.ac.resume(),i.visualize(),i.setInterval()},this.stop=function(){i.abort(),i.ac.close(),window.cancelAnimationFrame(i.rafId)},this.source=null,this.count=0,this.draw=n,this.size=t,this.volume=a,this.currentTime=o,this.initAC()}}();n.default=o}});
//# sourceMappingURL=24.1c0ef80c.chunk.js.map