{"version":3,"sources":["webpack:///./src/pages/2048/tools.tsx","webpack:///./node_modules/rc-util/lib/KeyCode.js","webpack:///./src/constant/common.ts","webpack:///./src/pages/2048/index.tsx"],"names":["getValue","x","y","p","res","v","index","some","i","same","moveRight","changed","max","curr","occupied","currV","currIndex","nextV","nextIndex","merged","push","id","Math","random","moveLeft","min","moveDown","moveUp","Object","defineProperty","exports","value","default","KeyCode","MAC_ENTER","BACKSPACE","TAB","NUM_CENTER","ENTER","SHIFT","CTRL","ALT","PAUSE","CAPS_LOCK","ESC","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","PRINT_SCREEN","INSERT","DELETE","ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","QUESTION_MARK","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","META","WIN_KEY_RIGHT","CONTEXT_MENU","NUM_ZERO","NUM_ONE","NUM_TWO","NUM_THREE","NUM_FOUR","NUM_FIVE","NUM_SIX","NUM_SEVEN","NUM_EIGHT","NUM_NINE","NUM_MULTIPLY","NUM_PLUS","NUM_MINUS","NUM_PERIOD","NUM_DIVISION","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NUMLOCK","SEMICOLON","DASH","EQUALS","COMMA","PERIOD","SLASH","APOSTROPHE","SINGLE_QUOTE","OPEN_SQUARE_BRACKET","BACKSLASH","CLOSE_SQUARE_BRACKET","WIN_KEY","MAC_FF_META","WIN_IME","isTextModifyingKeyEvent","e","keyCode","altKey","ctrlKey","metaKey","isCharacterKey","window","navigator","userAgent","indexOf","_default","left","up","right","down","storage","Storage","props","reset","pieces","isInited","isArray","addRandom","set","state","size","cached","setState","removeMerged","f","filter","touchstart","changedTouches","pageX","pageY","touchmove","preventDefault","touchend","sx","sy","ex","ey","code","abs","doMove","keydown","dp","lp","rp","isReset","setTimeout","setStorage","doAddRandom","clone","item","length","get4or2","renderGrid","Array","fill","map","v1","className","key","v2","isGameOver","list","forEach","canMove","data","r","c","get","document","addEventListener","componentDidMount","this","componentWillUnmount","removeEventListener","render","title","onConfirm","handle","okText","cancelText","type","Component"],"mappings":"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","file":"js/13.cb05abf6642be16505e9.bundle.js","sourcesContent":["interface IPiece {\n  x: number;\n  y: number;\n  v: number;\n  merged?: boolean;\n  id: number;\n}\n\nconst getValue = (x, y, p) => {\n  let res = { v: 0, index: -1 }\n  p.some((i, index) => {\n    const same = i.x === x && i.y === y\n    if (same) {\n      res = { v: i.v, index }\n    }\n    return same\n  })\n  return res\n}\n\nexport default {\n  moveRight: (p: IPiece[]) => {\n    let changed = false\n    for (let y = 0; y < 4; y++) {\n      let max = 3\n      for (let x = 2; x >= 0; x--) {\n        let curr = -1\n        const isOccupied = p.some((i, index) => {\n          const occupied = i.x === x + 1 && i.y === y\n          if (i.x === x && i.y === y) {\n            curr = index\n          }\n          if (occupied) {\n            max--\n          }\n          return occupied\n        })\n        if (!isOccupied && curr >= 0) {\n          p[curr].x = max\n          changed = true\n          max--\n        }\n      }\n      for (let x = 2; x >= 0; x--) {\n        const { v: currV, index: currIndex } = getValue(x, y, p)\n        const { v: nextV, index: nextIndex } = getValue(x + 1, y, p)\n        if (currV && nextV && currV === nextV) {\n          p[currIndex].x = x + 1\n          p[currIndex].merged = true\n          p[nextIndex].merged = true\n          for (let v = x - 1; v >= 0; v--) {\n            const { index: i } = getValue(v, y, p)\n            if (i >= 0) {\n              p[i].x = p[i].x < 3 ? p[i].x + 1 : p[i].x\n            }\n          }\n          p.push({ x: x + 1, y, v: currV * 2, id: Math.random() })\n          changed = true\n        }\n      }\n    }\n    return { p, changed }\n  },\n\n  moveLeft: (p: IPiece[]) => {\n    let changed = false\n    for (let y = 0; y < 4; y++) {\n      let min = 0\n      for (let x = 1; x < 4; x++) {\n        let curr = -1\n        const isOccupied = p.some((i, index) => {\n          const occupied = i.x === x - 1 && i.y === y\n          if (i.x === x && i.y === y) {\n            curr = index\n          }\n          if (occupied) {\n            min++\n          }\n          return occupied\n        })\n        if (!isOccupied && curr >= 0) {\n          p[curr].x = min\n          changed = true\n          min++\n        }\n      }\n      for (let x = 1; x < 4; x++) {\n        const { v: currV, index: currIndex } = getValue(x, y, p)\n        const { v: nextV, index: nextIndex } = getValue(x - 1, y, p)\n        if (currV && nextV && currV === nextV) {\n          p[currIndex].x = x - 1\n          p[currIndex].merged = true\n          p[nextIndex].merged = true\n          for (let v = x; v <= 3; v++) {\n            const { index: i } = getValue(v, y, p)\n            if (i >= 0) {\n              p[i].x = p[i].x > 0 ? p[i].x - 1 : p[i].x\n            }\n          }\n          p.push({ x: x - 1, y, v: currV * 2, id: Math.random() })\n          changed = true\n        }\n      }\n    }\n    return { p, changed }\n  },\n\n  moveDown: (p: IPiece[]) => {\n    let changed = false\n    for (let x = 0; x < 4; x++) {\n      let max = 3\n      for (let y = 2; y >= 0; y--) {\n        let curr = -1\n        const isOccupied = p.some((i, index) => {\n          const occupied = i.x === x && i.y === y + 1\n          if (i.x === x && i.y === y) {\n            curr = index\n          }\n          if (occupied) {\n            max--\n          }\n          return occupied\n        })\n        if (!isOccupied && curr >= 0) {\n          p[curr].y = max\n          changed = true\n          max--\n        }\n      }\n      for (let y = 2; y >= 0; y--) {\n        const { v: currV, index: currIndex } = getValue(x, y, p)\n        const { v: nextV, index: nextIndex } = getValue(x, y + 1, p)\n        if (currV && nextV && currV === nextV) {\n          p[currIndex].y = y + 1\n          p[currIndex].merged = true\n          p[nextIndex].merged = true\n          for (let v = y - 1; v >= 0; v--) {\n            const { index: i } = getValue(x, v, p)\n            if (i >= 0) {\n              p[i].y = p[i].y < 3 ? p[i].y + 1 : p[i].y\n            }\n          }\n          p.push({ x, y: y + 1, v: currV * 2, id: Math.random() })\n          changed = true\n        }\n      }\n    }\n    return { p, changed }\n  },\n\n  moveUp: (p: IPiece[]) => {\n    let changed = false\n    for (let x = 0; x < 4; x++) {\n      let min = 0\n      for (let y = 1; y < 4; y++) {\n        let curr = -1\n        const isOccupied = p.some((i, index) => {\n          const occupied = i.x === x && i.y === y - 1\n          if (i.x === x && i.y === y) {\n            curr = index\n          }\n          if (occupied) {\n            min++\n          }\n          return occupied\n        })\n        if (!isOccupied && curr >= 0) {\n          p[curr].y = min\n          changed = true\n          min++\n        }\n      }\n      for (let y = 1; y < 4; y++) {\n        const { v: currV, index: currIndex } = getValue(x, y, p)\n        const { v: nextV, index: nextIndex } = getValue(x, y - 1, p)\n        if (currV && nextV && currV === nextV) {\n          p[currIndex].y = y - 1\n          p[currIndex].merged = true\n          p[nextIndex].merged = true\n          for (let v = y; v <= 3; v++) {\n            const { index: i } = getValue(x, v, p)\n            if (i >= 0) {\n              p[i].y = p[i].y > 0 ? p[i].y - 1 : p[i].y\n            }\n          }\n          p.push({ x, y: y - 1, v: currV * 2, id: Math.random() })\n          changed = true\n        }\n      }\n    }\n    return { p, changed }\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/**\n * @ignore\n * some key-codes definition and utils from closure-library\n * @author yiminghe@gmail.com\n */\nvar KeyCode = {\n  /**\n   * MAC_ENTER\n   */\n  MAC_ENTER: 3,\n\n  /**\n   * BACKSPACE\n   */\n  BACKSPACE: 8,\n\n  /**\n   * TAB\n   */\n  TAB: 9,\n\n  /**\n   * NUMLOCK on FF/Safari Mac\n   */\n  NUM_CENTER: 12,\n\n  /**\n   * ENTER\n   */\n  ENTER: 13,\n\n  /**\n   * SHIFT\n   */\n  SHIFT: 16,\n\n  /**\n   * CTRL\n   */\n  CTRL: 17,\n\n  /**\n   * ALT\n   */\n  ALT: 18,\n\n  /**\n   * PAUSE\n   */\n  PAUSE: 19,\n\n  /**\n   * CAPS_LOCK\n   */\n  CAPS_LOCK: 20,\n\n  /**\n   * ESC\n   */\n  ESC: 27,\n\n  /**\n   * SPACE\n   */\n  SPACE: 32,\n\n  /**\n   * PAGE_UP\n   */\n  PAGE_UP: 33,\n\n  /**\n   * PAGE_DOWN\n   */\n  PAGE_DOWN: 34,\n\n  /**\n   * END\n   */\n  END: 35,\n\n  /**\n   * HOME\n   */\n  HOME: 36,\n\n  /**\n   * LEFT\n   */\n  LEFT: 37,\n\n  /**\n   * UP\n   */\n  UP: 38,\n\n  /**\n   * RIGHT\n   */\n  RIGHT: 39,\n\n  /**\n   * DOWN\n   */\n  DOWN: 40,\n\n  /**\n   * PRINT_SCREEN\n   */\n  PRINT_SCREEN: 44,\n\n  /**\n   * INSERT\n   */\n  INSERT: 45,\n\n  /**\n   * DELETE\n   */\n  DELETE: 46,\n\n  /**\n   * ZERO\n   */\n  ZERO: 48,\n\n  /**\n   * ONE\n   */\n  ONE: 49,\n\n  /**\n   * TWO\n   */\n  TWO: 50,\n\n  /**\n   * THREE\n   */\n  THREE: 51,\n\n  /**\n   * FOUR\n   */\n  FOUR: 52,\n\n  /**\n   * FIVE\n   */\n  FIVE: 53,\n\n  /**\n   * SIX\n   */\n  SIX: 54,\n\n  /**\n   * SEVEN\n   */\n  SEVEN: 55,\n\n  /**\n   * EIGHT\n   */\n  EIGHT: 56,\n\n  /**\n   * NINE\n   */\n  NINE: 57,\n\n  /**\n   * QUESTION_MARK\n   */\n  QUESTION_MARK: 63,\n\n  /**\n   * A\n   */\n  A: 65,\n\n  /**\n   * B\n   */\n  B: 66,\n\n  /**\n   * C\n   */\n  C: 67,\n\n  /**\n   * D\n   */\n  D: 68,\n\n  /**\n   * E\n   */\n  E: 69,\n\n  /**\n   * F\n   */\n  F: 70,\n\n  /**\n   * G\n   */\n  G: 71,\n\n  /**\n   * H\n   */\n  H: 72,\n\n  /**\n   * I\n   */\n  I: 73,\n\n  /**\n   * J\n   */\n  J: 74,\n\n  /**\n   * K\n   */\n  K: 75,\n\n  /**\n   * L\n   */\n  L: 76,\n\n  /**\n   * M\n   */\n  M: 77,\n\n  /**\n   * N\n   */\n  N: 78,\n\n  /**\n   * O\n   */\n  O: 79,\n\n  /**\n   * P\n   */\n  P: 80,\n\n  /**\n   * Q\n   */\n  Q: 81,\n\n  /**\n   * R\n   */\n  R: 82,\n\n  /**\n   * S\n   */\n  S: 83,\n\n  /**\n   * T\n   */\n  T: 84,\n\n  /**\n   * U\n   */\n  U: 85,\n\n  /**\n   * V\n   */\n  V: 86,\n\n  /**\n   * W\n   */\n  W: 87,\n\n  /**\n   * X\n   */\n  X: 88,\n\n  /**\n   * Y\n   */\n  Y: 89,\n\n  /**\n   * Z\n   */\n  Z: 90,\n\n  /**\n   * META\n   */\n  META: 91,\n\n  /**\n   * WIN_KEY_RIGHT\n   */\n  WIN_KEY_RIGHT: 92,\n\n  /**\n   * CONTEXT_MENU\n   */\n  CONTEXT_MENU: 93,\n\n  /**\n   * NUM_ZERO\n   */\n  NUM_ZERO: 96,\n\n  /**\n   * NUM_ONE\n   */\n  NUM_ONE: 97,\n\n  /**\n   * NUM_TWO\n   */\n  NUM_TWO: 98,\n\n  /**\n   * NUM_THREE\n   */\n  NUM_THREE: 99,\n\n  /**\n   * NUM_FOUR\n   */\n  NUM_FOUR: 100,\n\n  /**\n   * NUM_FIVE\n   */\n  NUM_FIVE: 101,\n\n  /**\n   * NUM_SIX\n   */\n  NUM_SIX: 102,\n\n  /**\n   * NUM_SEVEN\n   */\n  NUM_SEVEN: 103,\n\n  /**\n   * NUM_EIGHT\n   */\n  NUM_EIGHT: 104,\n\n  /**\n   * NUM_NINE\n   */\n  NUM_NINE: 105,\n\n  /**\n   * NUM_MULTIPLY\n   */\n  NUM_MULTIPLY: 106,\n\n  /**\n   * NUM_PLUS\n   */\n  NUM_PLUS: 107,\n\n  /**\n   * NUM_MINUS\n   */\n  NUM_MINUS: 109,\n\n  /**\n   * NUM_PERIOD\n   */\n  NUM_PERIOD: 110,\n\n  /**\n   * NUM_DIVISION\n   */\n  NUM_DIVISION: 111,\n\n  /**\n   * F1\n   */\n  F1: 112,\n\n  /**\n   * F2\n   */\n  F2: 113,\n\n  /**\n   * F3\n   */\n  F3: 114,\n\n  /**\n   * F4\n   */\n  F4: 115,\n\n  /**\n   * F5\n   */\n  F5: 116,\n\n  /**\n   * F6\n   */\n  F6: 117,\n\n  /**\n   * F7\n   */\n  F7: 118,\n\n  /**\n   * F8\n   */\n  F8: 119,\n\n  /**\n   * F9\n   */\n  F9: 120,\n\n  /**\n   * F10\n   */\n  F10: 121,\n\n  /**\n   * F11\n   */\n  F11: 122,\n\n  /**\n   * F12\n   */\n  F12: 123,\n\n  /**\n   * NUMLOCK\n   */\n  NUMLOCK: 144,\n\n  /**\n   * SEMICOLON\n   */\n  SEMICOLON: 186,\n\n  /**\n   * DASH\n   */\n  DASH: 189,\n\n  /**\n   * EQUALS\n   */\n  EQUALS: 187,\n\n  /**\n   * COMMA\n   */\n  COMMA: 188,\n\n  /**\n   * PERIOD\n   */\n  PERIOD: 190,\n\n  /**\n   * SLASH\n   */\n  SLASH: 191,\n\n  /**\n   * APOSTROPHE\n   */\n  APOSTROPHE: 192,\n\n  /**\n   * SINGLE_QUOTE\n   */\n  SINGLE_QUOTE: 222,\n\n  /**\n   * OPEN_SQUARE_BRACKET\n   */\n  OPEN_SQUARE_BRACKET: 219,\n\n  /**\n   * BACKSLASH\n   */\n  BACKSLASH: 220,\n\n  /**\n   * CLOSE_SQUARE_BRACKET\n   */\n  CLOSE_SQUARE_BRACKET: 221,\n\n  /**\n   * WIN_KEY\n   */\n  WIN_KEY: 224,\n\n  /**\n   * MAC_FF_META\n   */\n  MAC_FF_META: 224,\n\n  /**\n   * WIN_IME\n   */\n  WIN_IME: 229,\n  // ======================== Function ========================\n\n  /**\n   * whether text and modified key is entered at the same time.\n   */\n  isTextModifyingKeyEvent: function isTextModifyingKeyEvent(e) {\n    var keyCode = e.keyCode;\n\n    if (e.altKey && !e.ctrlKey || e.metaKey || // Function keys don't generate text\n    keyCode >= KeyCode.F1 && keyCode <= KeyCode.F12) {\n      return false;\n    } // The following keys are quite harmless, even in combination with\n    // CTRL, ALT or SHIFT.\n\n\n    switch (keyCode) {\n      case KeyCode.ALT:\n      case KeyCode.CAPS_LOCK:\n      case KeyCode.CONTEXT_MENU:\n      case KeyCode.CTRL:\n      case KeyCode.DOWN:\n      case KeyCode.END:\n      case KeyCode.ESC:\n      case KeyCode.HOME:\n      case KeyCode.INSERT:\n      case KeyCode.LEFT:\n      case KeyCode.MAC_FF_META:\n      case KeyCode.META:\n      case KeyCode.NUMLOCK:\n      case KeyCode.NUM_CENTER:\n      case KeyCode.PAGE_DOWN:\n      case KeyCode.PAGE_UP:\n      case KeyCode.PAUSE:\n      case KeyCode.PRINT_SCREEN:\n      case KeyCode.RIGHT:\n      case KeyCode.SHIFT:\n      case KeyCode.UP:\n      case KeyCode.WIN_KEY:\n      case KeyCode.WIN_KEY_RIGHT:\n        return false;\n\n      default:\n        return true;\n    }\n  },\n\n  /**\n   * whether character is entered.\n   */\n  isCharacterKey: function isCharacterKey(keyCode) {\n    if (keyCode >= KeyCode.ZERO && keyCode <= KeyCode.NINE) {\n      return true;\n    }\n\n    if (keyCode >= KeyCode.NUM_ZERO && keyCode <= KeyCode.NUM_MULTIPLY) {\n      return true;\n    }\n\n    if (keyCode >= KeyCode.A && keyCode <= KeyCode.Z) {\n      return true;\n    } // Safari sends zero key code for non-latin characters.\n\n\n    if (window.navigator.userAgent.indexOf('WebKit') !== -1 && keyCode === 0) {\n      return true;\n    }\n\n    switch (keyCode) {\n      case KeyCode.SPACE:\n      case KeyCode.QUESTION_MARK:\n      case KeyCode.NUM_PLUS:\n      case KeyCode.NUM_MINUS:\n      case KeyCode.NUM_PERIOD:\n      case KeyCode.NUM_DIVISION:\n      case KeyCode.SEMICOLON:\n      case KeyCode.DASH:\n      case KeyCode.EQUALS:\n      case KeyCode.COMMA:\n      case KeyCode.PERIOD:\n      case KeyCode.SLASH:\n      case KeyCode.APOSTROPHE:\n      case KeyCode.SINGLE_QUOTE:\n      case KeyCode.OPEN_SQUARE_BRACKET:\n      case KeyCode.BACKSLASH:\n      case KeyCode.CLOSE_SQUARE_BRACKET:\n        return true;\n\n      default:\n        return false;\n    }\n  }\n};\nvar _default = KeyCode;\nexports.default = _default;","export default {\n  keyCode: {\n    left: 37,\n    up: 38,\n    right: 39,\n    down: 40\n  }\n}\n","import Utils from '@utils'\nimport { Button, Popconfirm } from 'antd'\nimport React from 'react'\nimport './index.less'\nimport Tools from './tools'\nimport common from '@constant/common'\nconst storage = new Utils.Storage('2048')\nconst { keyCode } = common\n\ninterface IPiece {\n  x: number;\n  y: number;\n  v: number;\n  id: number;\n  merged?: boolean;\n}\n\ninterface IState {\n  size: number;\n  pieces: IPiece[];\n  cached: {\n    x: number;\n    y: number;\n  };\n}\n\ninterface IProp {\n  isMobile: boolean;\n}\n\nclass Page2048 extends React.Component<IProp, IState> {\n  constructor(props) {\n    super(props)\n    this.reset(storage.get('pieces'), true)\n    document.addEventListener('keydown', this.keydown)\n  }\n\n  reset = (pieces, isInited) => {\n    if (!Utils.isArray(pieces)) {\n      pieces = []\n      this.addRandom(pieces, true)\n      this.addRandom(pieces, true)\n      storage.set('pieces', null)\n    }\n\n    const state = {\n      size: 4,\n      pieces,\n      cached: { x: 0, y: 0 }\n    }\n\n    if (isInited) {\n      this.state = { ...state }\n    } else {\n      this.setState(state)\n    }\n  }\n\n  componentDidMount() {\n    document.addEventListener('touchstart', this.touchstart)\n    document.addEventListener('touchmove', this.touchmove)\n    document.addEventListener('touchend', this.touchend)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.keydown)\n    document.removeEventListener('touchstart', this.touchstart)\n    document.removeEventListener('touchmove', this.touchmove)\n    document.removeEventListener('touchend', this.touchend)\n  }\n\n  removeMerged = f => {\n    const { pieces: p } = this.state\n    const pieces = p.filter(i => !i.merged)\n    this.setState({ pieces }, f)\n  }\n\n  touchstart = e => {\n    const { pageX, pageY } = e.changedTouches[0]\n    this.setState({ cached: { x: pageX, y: pageY } })\n  }\n\n  touchmove = e => e.preventDefault()\n\n  touchend = e => {\n    const { x: sx, y: sy } = this.state.cached\n    const { pageX: ex, pageY: ey } = e.changedTouches[0]\n    let code = 0\n    if (Math.abs(sx - ex) > Math.abs(sy - ey) && Math.abs(sx - ex) > 20) {\n      code = sx - ex > 0 ? keyCode.left : keyCode.right\n    } else if (\n      Math.abs(sx - ex) < Math.abs(sy - ey) &&\n      Math.abs(sy - ey) > 20\n    ) {\n      code = sy - ey > 0 ? keyCode.up : keyCode.down\n    } else {\n      return\n    }\n    this.doMove(code)\n  }\n\n  keydown = e => this.doMove(e.keyCode)\n\n  doMove = code => {\n    this.removeMerged(() => {\n      const { pieces } = this.state\n      let p: IPiece[] = pieces\n      switch (code) {\n        case keyCode.up:\n          const { p: up, changed: uc } = Tools.moveUp(pieces)\n          if (uc) {\n            p = this.addRandom(up)\n          }\n          break\n        case keyCode.down:\n          const { p: dp, changed: dc } = Tools.moveDown(pieces)\n          if (dc) {\n            p = this.addRandom(dp)\n          }\n          break\n        case keyCode.left:\n          const { p: lp, changed: lc } = Tools.moveLeft(pieces)\n          if (lc) {\n            p = this.addRandom(lp)\n          }\n          break\n        case keyCode.right:\n          const { p: rp, changed: rc } = Tools.moveRight(pieces)\n          if (rc) {\n            p = this.addRandom(rp)\n          }\n          break\n      }\n      this.setState({ pieces: p })\n    })\n  }\n\n  addRandom = (p, isReset?) => {\n    if (!isReset) {\n      setTimeout(() => this.setStorage(p), 0)\n    }\n    const i = this.doAddRandom(p)\n    if (i) {\n      p.push(i)\n    }\n    return p\n  }\n\n  setStorage = p => {\n    storage.set(\n      'pieces',\n      Utils.clone(p).filter((item, i) => {\n        item.id = i\n        return !item.merged\n      })\n    )\n  }\n\n  doAddRandom = p => {\n    if (p.length === 16) {\n      return null\n    }\n    const x = Utils.random(0, 4)\n    const y = Utils.random(0, 4)\n    return p.some(i => i.x === x && i.y === y)\n      ? this.doAddRandom(p)\n      : { x, y, v: this.get4or2(), id: Math.random() }\n  }\n\n  get4or2 = () => (Math.random() > 0.9 ? 4 : 2)\n\n  renderGrid = () =>\n    new Array(this.state.size).fill(null).map((v1, x) => (\n      <div className=\"row\" key={x}>\n        {new Array(this.state.size).fill(null).map((v2, y) => (\n          <div className=\"item\" key={y} />\n        ))}\n      </div>\n    ))\n\n  isGameOver = pieces => {\n    const { size } = this.state\n    if (pieces.filter(p => !p.merged).length !== size * size) {\n      return false\n    }\n\n    const list: number[][] = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0]\n    ]\n\n    pieces.forEach(({ x, y, v }) => (list[x][y] = v))\n\n    return this.canMove(list)\n  }\n\n  canMove = data => {\n    for (let r = 0; r < data.length; r++) {\n      for (let c = 0; c < data[r].length; c++) {\n        if (data[r][c] === 0) {\n          return false\n        } else if (c < data[r].length - 1 && data[r][c] === data[r][c + 1]) {\n          return false\n        } else if (r < data.length - 1 && data[r][c] === data[r + 1][c]) {\n          return false\n        }\n      }\n    }\n    return true\n  }\n\n  render() {\n    const { pieces } = this.state\n    return (\n      <div className=\"game2048-wrapper\">\n        <div className=\"game2048-container\">\n          <div className=\"grid\">{this.renderGrid()}</div>\n          <div className=\"piece-contanier\">\n            {(pieces || []).map(item => (\n              <div\n                className={`piece piece-${item.v} piece-position-${item.x}-${\n                  item.y\n                } ${item.merged ? 'merged' : ''}`}\n                key={item.id}\n              >\n                <div className=\"item\">\n                  {item.v === 2048 ? (\n                    <i className=\"anticon icon-batman-logo\" />\n                  ) : (\n                    item.v\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n          <div className={this.isGameOver(pieces) ? 'mask' : 'mask hidden'}>\n            Game Over\n          </div>\n        </div>\n        <div className=\"btn-container\">\n          <Popconfirm\n            title=\"Sure about that?\"\n            onConfirm={Utils.handle(this.reset)}\n            okText=\"Yes\"\n            cancelText=\"No\"\n          >\n            <Button type=\"primary\" className=\"reset-btn\">\n              Reset\n            </Button>\n          </Popconfirm>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Page2048\n"],"sourceRoot":""}