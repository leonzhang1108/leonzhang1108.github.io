(window.webpackJsonp=window.webpackJsonp||[]).push([[14,34,45,66],{164:function(e,t,r){"use strict";r.r(t),t.default={keyCode:{left:37,up:38,right:39,down:40,space:32},block:{L:[[[0,0,1],[1,1,1]],[[1,1],[0,1],[0,1]],[[1,1,1],[1,0,0]],[[1,0],[1,0],[1,1]]],J:[[[1,0,0],[1,1,1]],[[1,1],[1,0],[1,0]],[[1,1,1],[0,0,1]],[[0,1],[0,1],[1,1]]],O:[[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]]],T:[[[0,1,0],[1,1,1]],[[0,1],[1,1],[0,1]],[[1,1,1],[0,1,0]],[[1,0],[1,1],[1,0]]],Z:[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]],[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]],S:[[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]],[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]]],I:[[[1,1,1,1]],[[1],[1],[1],[1]],[[1,1,1,1]],[[1],[1],[1],[1]]]},scores:[1,3,5,10]}},180:function(e,t,r){"use strict";r.r(t);var n,o=r(21),a=r(164),c=a.default.block,i=a.default.keyCode,s=function(e){e.width;var t=e.block,r=e.rx,n=e.y,o=e.playboard,a=e.length,c=[],i=!0;return t.forEach((function(e,t){e.every((function(e,r){return e&&c.push({x:r,y:t}),!0}))})),c.every((function(e){var t=e.x,c=e.y,s=t+r,l=n+c-a;return l>=0&&l<20&&o[l][s]&&(i=!1),i})),i},l=((n={})[i.up]=function(e){e.width;var t=e.block,r=e.rx,n=e.y,o=e.playboard,a=e.length,c=!0;return t.every((function(e,t){return e.every((function(e,i){var s=i+r,l=n+t-a;return l>=0&&l<20&&o[l][s]&&(c=!1),c})),c})),c},n[i.down]=function(e){var t=e.width,r=e.block,n=e.rx,o=e.y,a=e.playboard,c=e.length;if(21===o)return!1;for(var i=!0,s=[],l=0;l<t;l++)for(var u=r.length-1,d=!0;u>=0&&d;)r[u][l]&&(s.push({x:l,y:u}),d=!1),u--;return s.every((function(e){var t=e.x,r=e.y,s=t+n,l=o+r-c;return l>=0&&l<20&&a[l][s]&&(i=!1),i})),i},n[i.left]=s,n[i.right]=s,n);t.default={getCurrPosition:function(e){var t=e.x,r=e.y,n=e.cBlock,a=e.screen,i=e.rotate,s=e.moveTo,u=o.a.clone(a),d=c[n][i],v=d[0].length,p=10-v,f=Math.floor((10-v)/2),y=d.length,m=r,h=f+t;h<0&&(h=0,t=-f),h>p&&(h=p,t=v%2==1?f+1:f);var b=l[s]({width:v,block:d,rx:h,y:r,playboard:u,length:y});if(b)for(;m>0&&y>0;){var g=--m,w=d[y-1];g=g>20?20:g;for(var k=0;k<10;k++){if(k<w.length)u[g][h+k]||(u[g][h+k]=w[k])}y--}return{playboard:u,x:t,screen:a,couldMove:b}}}},353:function(e,t,r){},93:function(e,t,r){"use strict";r.r(t);var n,o=r(21),a=r(55),c=r.n(a),i=(r(61),r(0)),s=r.n(i),l=r(164),u=(r(353),r(180)),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),v=function(){return(v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=l.default.block,f=l.default.keyCode,y=l.default.scores,m=Object.keys(p),h=function(e){function t(t){var r=e.call(this,t)||this;return r.transform=o.a.transform,r.clearBtnInterval=function(){r.btnInterval&&clearInterval(r.btnInterval)},r.clearInterval=function(){r.interval&&clearInterval(r.interval)},r.resetGame=function(e){r.clearInterval();var t=r.calculateScreen({row:20,column:10}),n={row:20,column:10,screen:t,playboard:t,style:r.getSize(r.props),cBlock:m[o.a.random(0,m.length)],x:0,y:0,intervalTime:800,score:0,rotate:o.a.random(0,4),pause:!1,gameover:!1,touchDown:!1,pressed:!1};e?r.setState(n,(function(){return r.doMovePlayboard(!0)})):(r.state=v(v({},n),{couldMove:!1,h:0}),setTimeout((function(){return r.doMovePlayboard(!0)}),0))},r.visibilitychange=function(){(!r.state.pause&&"hidden"===document.visibilityState||r.state.pause&&"hidden"!==document.visibilityState)&&r.togglePause()},r.isGameOver=function(){var e=r.state,t=e.x,n=e.y,o=e.cBlock,a=e.screen,c=e.rotate;return!(u.default.getCurrPosition({x:t,y:n+1,cBlock:o,screen:a,rotate:c,moveTo:f.down}).couldMove||p[o][c].length<n-1)},r.clearRow=function(e){var t=o.a.clone(e).map((function(e){return e.map((function(e){return e?2:0}))})),r=[];return e.forEach((function(e,n){e.every((function(e){return e}))&&(t.splice(n,1),t.unshift(new Array(10).fill(0)),r.push(n))})),{screen:t,clearedList:r}},r.keyup=function(){r.clearBtnInterval(),r.setState({pressed:!1})},r.keydown=function(e){if(!r.state.pressed){var t=e.keyCode;t===f.space?r.doMove(t):r.touchStart(t)}},r.doMove=function(e){var t=r.state,n=t.x,o=t.y,a=t.screen,c=t.cBlock,i=t.row,s=t.rotate,l=t.pause,d=t.gameover;if(!l&&!d){var v=[[]],p=n;switch(e){case f.left:p=n-1;var y=u.default.getCurrPosition({x:p,y:o||20,cBlock:c,screen:a,rotate:s,moveTo:f.left}),m=y.playboard,h=y.x;return void(y.couldMove&&(p=h,v=m,r.setState({playboard:v,x:p,pressed:!0})));case f.right:p=n+1;var b=u.default.getCurrPosition({x:p,y:o||20,cBlock:c,screen:a,rotate:s,moveTo:f.right}),g=b.playboard,w=b.x;return void(b.couldMove&&(p=w,v=g,r.setState({playboard:v,x:p,pressed:!0})));case f.down:if(o>i)return;var k=u.default.getCurrPosition({x:p,y:o+1,cBlock:c,screen:a,rotate:s,moveTo:f.down}),S=k.couldMove,B=k.playboard;return void(S?(r.newInterval(),r.setState({playboard:B,y:o+1,pressed:!0})):r.reset());case f.up:var x=s;x=x>=3?0:x+1;var E=u.default.getCurrPosition({x:n,y:o||20,cBlock:c,screen:a,rotate:x,moveTo:f.up}),I=E.playboard;return void(E.couldMove&&(v=I,r.setState({playboard:v,rotate:x,pressed:!0})));case f.space:r.goToBottom()}}},r.newInterval=function(e){r.clearInterval(),r.isGameOver()?r.setState({gameover:!0}):r.doMovePlayboard(e)},r.doMovePlayboard=function(e){e&&r.movePlayboard(r.state),r.doTimeout()},r.doTimeout=function(){r.interval=setInterval((function(){r.movePlayboard(r.state)}),r.state.intervalTime)},r.movePlayboard=function(e){var t=e.x,n=e.y,o=r.state,a=o.screen,c=o.cBlock,i=o.rotate,s=u.default.getCurrPosition({x:t,y:n+1,cBlock:c,screen:a,rotate:i,moveTo:f.down}),l=s.playboard;s.couldMove?r.setState({playboard:l,y:n+1}):r.reset()},r.goToBottom=function(){var e=r.state,t=e.x,n=e.cBlock,o=e.rotate,a=e.screen,c=e.gameover,i=e.pause;if(!c&&!i){for(var s=r.state,l=s.y,d=s.playboard,v=!0;v;){var p=u.default.getCurrPosition({x:t,y:l+1,cBlock:n,screen:a,rotate:o,moveTo:f.down}),y=p.couldMove,m=p.playboard;v=y,y?(l++,d=m):r.setState({playboard:d,y:l,touchDown:!0,pressed:!0},r.isRowNeedClear)}setTimeout((function(){return r.setState({touchDown:!1})}),100)}},r.isRowNeedClear=function(e){r.clearInterval();var t=r.state,n=t.playboard,o=t.score,a=r.clearRow(n),c=a.screen,i=a.clearedList,s=i.length;if(s){var l=e?{screen:c,score:o+y[s-1]}:{screen:c,score:o};i.forEach((function(e){return n[e]=new Array(10).fill(3)})),r.setState({screen:n}),r.vibrate(100),setTimeout((function(){r.setState(l,(function(){return r.newInterval(!0)}))}),300)}else r.setState({screen:c},(function(){return r.newInterval(!0)}))},r.reset=function(){r.vibrate(100),r.setState({cBlock:m[o.a.random(0,m.length)],y:0,x:0,rotate:o.a.random(0,4)},(function(){return r.isRowNeedClear(!0)}))},r.calculateScreen=function(e){for(var t=e.row,r=e.column,n=[],o=0;o<t;o++){for(var a=[],c=0;c<r;c++)a.push(0);n.push(a)}return n},r.renderPlayboard=function(){return r.state.playboard?r.state.playboard.map((function(e,t){return s.a.createElement("div",{className:"row",key:t},e.map((function(e,t){var r="";switch(e){case 1:r="block";break;case 2:r="full";break;case 3:r="cleared"}return s.a.createElement("div",{key:t,className:"item "+r})})))})):null},r.togglePause=function(){var e=r.state.pause;!e&&r.interval?(r.clearInterval(),r.clearBtnInterval()):r.newInterval(),r.setState({pause:!e})},r.touchStart=function(e){r.clearBtnInterval();var t=e===f.down?50:100;r.doMove(e),e!==f.up&&(r.btnInterval=setInterval((function(){return r.doMove(e)}),t))},r.getSize=function(e){var t;if(!r.props.isMobile)return{};var n=e.h,o=n/960;return(t={paddingTop:.6*(n-480-100)})[r.transform]="scale("+(o+.3)+")",t},r.vibrate=function(e){return null},r.getDirectionBtn=function(e){return s.a.createElement("div",{onTouchStart:o.a.handle("up"===e?r.doMove:r.touchStart,f[e]),className:"anticon anticon-ts-app icon-"+e+"-circle"})},document.addEventListener("keyup",r.keyup),document.addEventListener("keydown",r.keydown),document.addEventListener("touchend",r.clearBtnInterval),document.addEventListener("visibilitychange",r.visibilitychange),r.resetGame(),r}return d(t,e),t.prototype.componentWillUnmount=function(){this.clearInterval(),this.clearBtnInterval(),document.removeEventListener("keyup",this.keyup),document.removeEventListener("keydown",this.keydown),document.removeEventListener("touchend",this.clearBtnInterval),document.removeEventListener("visibilitychange",this.visibilitychange)},t.prototype.componentDidUpdate=function(e){var t=this.props.isMobile;e.isMobile!==t&&this.setState({style:this.getSize(e)})},t.prototype.render=function(){var e,t=this.props.isMobile,r=this.state,n=r.pause,o=r.gameover,a=r.touchDown,i=r.score,l=r.style,u=((e={})[this.transform]=l[this.transform],e);return s.a.createElement("div",{className:"tetris-wrapper "+(t?"mobile":"")},s.a.createElement("div",{className:"tetris-screen-wrapper",style:l},s.a.createElement("div",{className:"score"},i),s.a.createElement("div",{className:"tetris-screen "+(a?"touch-buttom":"")},this.renderPlayboard(),o?s.a.createElement("div",{className:"game-over"},s.a.createElement(c.a,{type:"primary",onClick:this.resetGame},"Reset")):null)),s.a.createElement("div",{className:"btn-wrapper"},s.a.createElement("div",{className:"functional-btn",style:u},s.a.createElement("div",{onTouchStart:this.togglePause,className:"anticon anticon-ts-app icon-"+(n?"play":"pause")}),s.a.createElement("div",{onTouchStart:this.goToBottom,className:"anticon anticon-ts-app icon-down"})),s.a.createElement("div",{className:"direction",style:u},this.getDirectionBtn("up"),s.a.createElement("div",{className:"middle"},this.getDirectionBtn("left"),this.getDirectionBtn("right")),this.getDirectionBtn("down"))))},t}(s.a.Component);t.default=o.a.connect({component:h,mapStateToProps:function(e){return{isMobile:e.common.isMobile,h:e.common.contentHeight}}})}}]);
//# sourceMappingURL=14.6e17bac42eb4b3de6e9f.bundle.js.map