(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{182:function(e,n,a){"use strict";a.r(n);var t=a(123),r=a.n(t),o=function(e){var n=this,a=e.draw,t=e.size,o=e.volume,i=e.currentTime;this.initAC=function(){n.ac=new AudioContext,n.gainNode=n.ac.createGain(),n.gainNode.gain.value=n.volume,n.gainNode.connect(n.ac.destination),n.analyser=n.ac.createAnalyser(),n.analyser.fftSize=2*n.size,n.analyser.connect(n.gainNode)},this.load=function(e,a,t){n.abort(),r()({url:e,responseType:"arraybuffer",onDownloadProgress:function(e){var n=e.loaded,a=e.total;t(n/a*100)},cancelToken:new r.a.CancelToken((function(e){n.axiosCancellation=e}))}).then((function(e){a(e.data)})).catch((function(e){r.a.isCancel(e)?console.log("Request canceled",e.message):t("error")}))},this.abort=function(){return n.axiosCancellation&&n.axiosCancellation("abort")},this.play=function(e){var a=e.src,t=e.cb,r=e.progressCb,o=++n.count;n.source&&n.source.stop();var i=function(e){if(n.buffer=e,o===n.count&&n.ac)try{n.createBufferSource({buffer:e},t)}catch(e){console.log(e)}};a instanceof ArrayBuffer?n.ac.decodeAudioData(a,i):n.load(a,(function(e){n.ac.decodeAudioData(e,i)}),r)},this.createBufferSource=function(e,a){var t=e.buffer,r=e.start,o=void 0===r?0:r;if(n.source&&n.source.stop(),n.buffer){var i=n.ac.createBufferSource();i.buffer=n.buffer=t,i.loop=!0,i.connect(n.analyser),i.start(0,o),n.source=i,n.visualize(),a&&a()}},this.updateVolume=function(e){console.log(e),n.gainNode.gain.value=n.volume=e},this.visualize=function(){var e=new Uint8Array(n.analyser.frequencyBinCount),a=window.requestAnimationFrame,t=function(){n.analyser.getByteFrequencyData(e),n.draw(e,n.volume),n.rafId=a(t)};t()},this.setCurrent=function(e){void 0===e&&(e=0);var a=n.buffer;n.curr=0,n.createBufferSource({buffer:a,start:e}),n.setInterval(!0)},this.setInterval=function(e){n.interval&&clearInterval(n.interval),e&&n.setCurrTime(e),n.interval=setInterval((function(){n.setCurrTime()}),1e3)},this.setCurrTime=function(e){var a=n.buffer?n.buffer.duration.toFixed(0):0;n.currentTime({curr:e?0:++n.curr,total:a})},this.pause=function(){n.ac.suspend(),window.cancelAnimationFrame(n.rafId),n.interval&&clearInterval(n.interval)},this.resume=function(){n.ac.resume(),n.visualize(),n.setInterval()},this.stop=function(){n.abort(),n.ac.close(),window.cancelAnimationFrame(n.rafId)},this.source=null,this.count=0,this.draw=a,this.size=t,this.volume=o,this.currentTime=i,this.initAC()};n.default=o}}]);