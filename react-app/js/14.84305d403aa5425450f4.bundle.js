(window.webpackJsonp=window.webpackJsonp||[]).push([[14,34,45,66],{301:function(e,t,n){"use strict";n.r(t),t.default={keyCode:{left:37,up:38,right:39,down:40,space:32},block:{L:[[[0,0,1],[1,1,1]],[[1,1],[0,1],[0,1]],[[1,1,1],[1,0,0]],[[1,0],[1,0],[1,1]]],J:[[[1,0,0],[1,1,1]],[[1,1],[1,0],[1,0]],[[1,1,1],[0,0,1]],[[0,1],[0,1],[1,1]]],O:[[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]]],T:[[[0,1,0],[1,1,1]],[[0,1],[1,1],[0,1]],[[1,1,1],[0,1,0]],[[1,0],[1,1],[1,0]]],Z:[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]],[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]],S:[[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]],[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]]],I:[[[1,1,1,1]],[[1],[1],[1],[1]],[[1,1,1,1]],[[1],[1],[1],[1]]]},scores:[1,3,5,10]}},318:function(e,t,n){"use strict";n.r(t);var r,o=n(11),a=n(301),i=a.default.block,c=a.default.keyCode,s=function(e){e.width;var t=e.block,n=e.rx,r=e.y,o=e.playboard,a=e.length,i=[],c=!0;return t.forEach((function(e,t){e.every((function(e,n){return e&&i.push({x:n,y:t}),!0}))})),i.every((function(e){var t=e.x,i=e.y,s=t+n,l=r+i-a;return l>=0&&l<20&&o[l][s]&&(c=!1),c})),c},l=((r={})[c.up]=function(e){e.width;var t=e.block,n=e.rx,r=e.y,o=e.playboard,a=e.length,i=!0;return t.every((function(e,t){return e.every((function(e,c){var s=c+n,l=r+t-a;return l>=0&&l<20&&o[l][s]&&(i=!1),i})),i})),i},r[c.down]=function(e){var t=e.width,n=e.block,r=e.rx,o=e.y,a=e.playboard,i=e.length;if(21===o)return!1;for(var c=!0,s=[],l=0;l<t;l++)for(var u=n.length-1,d=!0;u>=0&&d;)n[u][l]&&(s.push({x:l,y:u}),d=!1),u--;return s.every((function(e){var t=e.x,n=e.y,s=t+r,l=o+n-i;return l>=0&&l<20&&a[l][s]&&(c=!1),c})),c},r[c.left]=s,r[c.right]=s,r);t.default={getCurrPosition:function(e){var t=e.x,n=e.y,r=e.cBlock,a=e.screen,c=e.rotate,s=e.moveTo,u=o.a.clone(a),d=i[r][c],v=d[0].length,f=10-v,m=Math.floor((10-v)/2),p=d.length,y=n,h=m+t;h<0&&(h=0,t=-m),h>f&&(h=f,t=v%2==1?m+1:m);var b=l[s]({width:v,block:d,rx:h,y:n,playboard:u,length:p});if(b)for(;y>0&&p>0;){var w=--y,g=d[p-1];w=w>20?20:w;for(var k=0;k<10;k++){if(k<g.length)u[w][h+k]||(u[w][h+k]=g[k])}p--}return{playboard:u,x:t,screen:a,couldMove:b}}}},465:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},o={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},a=[],i=[];function c(e,t,n){e.addEventListener(t,n,!1)}function s(e,t,n){e.removeEventListener(t,n,!1)}"undefined"!=typeof window&&"undefined"!=typeof document&&function(){var e=document.createElement("div").style;function t(t,n){for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];for(var a in o)if(a in e){n.push(o[a]);break}}}"AnimationEvent"in window||(delete r.animationstart.animation,delete o.animationend.animation),"TransitionEvent"in window||(delete r.transitionstart.transition,delete o.transitionend.transition),t(r,a),t(o,i)}();var l={startEvents:a,addStartEventListener:function(e,t){0!==a.length?a.forEach((function(n){c(e,n,t)})):window.setTimeout(t,0)},removeStartEventListener:function(e,t){0!==a.length&&a.forEach((function(n){s(e,n,t)}))},endEvents:i,addEndEventListener:function(e,t){0!==i.length?i.forEach((function(n){c(e,n,t)})):window.setTimeout(t,0)},removeEndEventListener:function(e,t){0!==i.length&&i.forEach((function(n){s(e,n,t)}))}};t.default=l,e.exports=t.default},489:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var r,o=n(11),a=n(52),i=n.n(a),c=(n(51),n(0)),s=n.n(c),l=n(301),u=(n(489),n(318)),d=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},f=l.default.block,m=l.default.keyCode,p=l.default.scores,y=Object.keys(f),h=function(e){function t(t){var n=e.call(this,t)||this;return n.transform=o.a.transform,n.clearBtnInterval=function(){n.btnInterval&&clearInterval(n.btnInterval)},n.clearInterval=function(){n.interval&&clearInterval(n.interval)},n.resetGame=function(e){n.clearInterval();var t=n.calculateScreen({row:20,column:10}),r={row:20,column:10,screen:t,playboard:t,style:n.getSize(n.props),cBlock:y[o.a.random(0,y.length)],x:0,y:0,intervalTime:800,score:0,rotate:o.a.random(0,4),pause:!1,gameover:!1,touchDown:!1,pressed:!1};e?n.setState(r,(function(){return n.doMovePlayboard(!0)})):(n.state=v(v({},r),{couldMove:!1,h:0}),setTimeout((function(){return n.doMovePlayboard(!0)}),0))},n.visibilitychange=function(){(!n.state.pause&&"hidden"===document.visibilityState||n.state.pause&&"hidden"!==document.visibilityState)&&n.togglePause()},n.isGameOver=function(){var e=n.state,t=e.x,r=e.y,o=e.cBlock,a=e.screen,i=e.rotate;return!(u.default.getCurrPosition({x:t,y:r+1,cBlock:o,screen:a,rotate:i,moveTo:m.down}).couldMove||f[o][i].length<r-1)},n.clearRow=function(e){var t=o.a.clone(e).map((function(e){return e.map((function(e){return e?2:0}))})),n=[];return e.forEach((function(e,r){e.every((function(e){return e}))&&(t.splice(r,1),t.unshift(new Array(10).fill(0)),n.push(r))})),{screen:t,clearedList:n}},n.keyup=function(){n.clearBtnInterval(),n.setState({pressed:!1})},n.keydown=function(e){if(!n.state.pressed){var t=e.keyCode;t===m.space?n.doMove(t):n.touchStart(t)}},n.doMove=function(e){var t=n.state,r=t.x,o=t.y,a=t.screen,i=t.cBlock,c=t.row,s=t.rotate,l=t.pause,d=t.gameover;if(!l&&!d){var v=[[]],f=r;switch(e){case m.left:f=r-1;var p=u.default.getCurrPosition({x:f,y:o||20,cBlock:i,screen:a,rotate:s,moveTo:m.left}),y=p.playboard,h=p.x;return void(p.couldMove&&(f=h,v=y,n.setState({playboard:v,x:f,pressed:!0})));case m.right:f=r+1;var b=u.default.getCurrPosition({x:f,y:o||20,cBlock:i,screen:a,rotate:s,moveTo:m.right}),w=b.playboard,g=b.x;return void(b.couldMove&&(f=g,v=w,n.setState({playboard:v,x:f,pressed:!0})));case m.down:if(o>c)return;var k=u.default.getCurrPosition({x:f,y:o+1,cBlock:i,screen:a,rotate:s,moveTo:m.down}),E=k.couldMove,S=k.playboard;return void(E?(n.newInterval(),n.setState({playboard:S,y:o+1,pressed:!0})):n.reset());case m.up:var T=s;T=T>=3?0:T+1;var M=u.default.getCurrPosition({x:r,y:o||20,cBlock:i,screen:a,rotate:T,moveTo:m.up}),B=M.playboard;return void(M.couldMove&&(v=B,n.setState({playboard:v,rotate:T,pressed:!0})));case m.space:n.goToBottom()}}},n.newInterval=function(e){n.clearInterval(),n.isGameOver()?n.setState({gameover:!0}):n.doMovePlayboard(e)},n.doMovePlayboard=function(e){e&&n.movePlayboard(n.state),n.doTimeout()},n.doTimeout=function(){n.interval=setInterval((function(){n.movePlayboard(n.state)}),n.state.intervalTime)},n.movePlayboard=function(e){var t=e.x,r=e.y,o=n.state,a=o.screen,i=o.cBlock,c=o.rotate,s=u.default.getCurrPosition({x:t,y:r+1,cBlock:i,screen:a,rotate:c,moveTo:m.down}),l=s.playboard;s.couldMove?n.setState({playboard:l,y:r+1}):n.reset()},n.goToBottom=function(){var e=n.state,t=e.x,r=e.cBlock,o=e.rotate,a=e.screen,i=e.gameover,c=e.pause;if(!i&&!c){for(var s=n.state,l=s.y,d=s.playboard,v=!0;v;){var f=u.default.getCurrPosition({x:t,y:l+1,cBlock:r,screen:a,rotate:o,moveTo:m.down}),p=f.couldMove,y=f.playboard;v=p,p?(l++,d=y):n.setState({playboard:d,y:l,touchDown:!0,pressed:!0},n.isRowNeedClear)}setTimeout((function(){return n.setState({touchDown:!1})}),100)}},n.isRowNeedClear=function(e){n.clearInterval();var t=n.state,r=t.playboard,o=t.score,a=n.clearRow(r),i=a.screen,c=a.clearedList,s=c.length;if(s){var l=e?{screen:i,score:o+p[s-1]}:{screen:i,score:o};c.forEach((function(e){return r[e]=new Array(10).fill(3)})),n.setState({screen:r}),n.vibrate(100),setTimeout((function(){n.setState(l,(function(){return n.newInterval(!0)}))}),300)}else n.setState({screen:i},(function(){return n.newInterval(!0)}))},n.reset=function(){n.vibrate(100),n.setState({cBlock:y[o.a.random(0,y.length)],y:0,x:0,rotate:o.a.random(0,4)},(function(){return n.isRowNeedClear(!0)}))},n.calculateScreen=function(e){for(var t=e.row,n=e.column,r=[],o=0;o<t;o++){for(var a=[],i=0;i<n;i++)a.push(0);r.push(a)}return r},n.renderPlayboard=function(){return n.state.playboard?n.state.playboard.map((function(e,t){return s.a.createElement("div",{className:"row",key:t},e.map((function(e,t){var n="";switch(e){case 1:n="block";break;case 2:n="full";break;case 3:n="cleared"}return s.a.createElement("div",{key:t,className:"item "+n})})))})):null},n.togglePause=function(){var e=n.state.pause;!e&&n.interval?(n.clearInterval(),n.clearBtnInterval()):n.newInterval(),n.setState({pause:!e})},n.touchStart=function(e){n.clearBtnInterval();var t=e===m.down?50:100;n.doMove(e),e!==m.up&&(n.btnInterval=setInterval((function(){return n.doMove(e)}),t))},n.getSize=function(e){var t;if(!n.props.isMobile)return{};var r=e.h,o=r/960;return(t={paddingTop:.6*(r-480-100)})[n.transform]="scale("+(o+.3)+")",t},n.vibrate=function(e){return null},n.getDirectionBtn=function(e){return s.a.createElement("div",{onTouchStart:o.a.handle("up"===e?n.doMove:n.touchStart,m[e]),className:"anticon anticon-ts-app icon-"+e+"-circle"})},document.addEventListener("keyup",n.keyup),document.addEventListener("keydown",n.keydown),document.addEventListener("touchend",n.clearBtnInterval),document.addEventListener("visibilitychange",n.visibilitychange),n.resetGame(),n}return d(t,e),t.prototype.componentWillUnmount=function(){this.clearInterval(),this.clearBtnInterval(),document.removeEventListener("keyup",this.keyup),document.removeEventListener("keydown",this.keydown),document.removeEventListener("touchend",this.clearBtnInterval),document.removeEventListener("visibilitychange",this.visibilitychange)},t.prototype.componentWillReceiveProps=function(e){this.setState({style:this.getSize(e)})},t.prototype.render=function(){var e,t=this.props.isMobile,n=this.state,r=n.pause,o=n.gameover,a=n.touchDown,c=n.score,l=n.style,u=((e={})[this.transform]=l[this.transform],e);return s.a.createElement("div",{className:"tetris-wrapper "+(t?"mobile":"")},s.a.createElement("div",{className:"tetris-screen-wrapper",style:l},s.a.createElement("div",{className:"score"},c),s.a.createElement("div",{className:"tetris-screen "+(a?"touch-buttom":"")},this.renderPlayboard(),o?s.a.createElement("div",{className:"game-over"},s.a.createElement(i.a,{type:"primary",onClick:this.resetGame},"Reset")):null)),s.a.createElement("div",{className:"btn-wrapper"},s.a.createElement("div",{className:"functional-btn",style:u},s.a.createElement("div",{onTouchStart:this.togglePause,className:"anticon anticon-ts-app icon-"+(r?"play":"pause")}),s.a.createElement("div",{onTouchStart:this.goToBottom,className:"anticon anticon-ts-app icon-down"})),s.a.createElement("div",{className:"direction",style:u},this.getDirectionBtn("up"),s.a.createElement("div",{className:"middle"},this.getDirectionBtn("left"),this.getDirectionBtn("right")),this.getDirectionBtn("down"))))},t}(s.a.Component);t.default=o.a.connect({component:h,mapStateToProps:function(e){return{isMobile:e.common.isMobile,h:e.common.contentHeight}}})}}]);
//# sourceMappingURL=14.84305d403aa5425450f4.bundle.js.map