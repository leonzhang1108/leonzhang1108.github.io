{"version":3,"sources":["webpack:///./src/pages/MusicVisualizer/floating-title.tsx"],"names":["doInterval","interval","setInterval","intervalContent","onOff","offsetWidth","setState","offset","clearInterval","componentWillMount","this","width","componentDidMount","wrapperWidth","wrapper","componentWillUnmount","componentWillReceiveProps","dom","render","musicName","className","ref","style","transform","Component"],"mappings":"4aAaA,yE,OAqCE,EAAAA,WAAa,WACX,EAAKC,SAAWC,YAAY,WAC1B,EAAKC,mBACJ,MAGL,EAAAA,gBAAkB,WACV,cAAEC,EAAA,EAAAA,MAAOC,EAAA,EAAAA,YACf,EAAKC,SAAS,CACZF,OAAQA,EACRG,OAAQH,EAAQ,EAAIC,KAIxB,EAAAG,cAAgB,WACV,EAAKP,UAAYO,cAAc,EAAKP,W,EAa5C,OAjE4B,OAM1B,YAAAQ,mBAAA,WACEC,KAAKJ,SAAS,CACZK,MAAO,EACPJ,OAAQ,EACRH,OAAO,EACPC,YAAa,KAIjB,YAAAO,kBAAA,WACEF,KAAKJ,SAAS,CAAEO,aAAcH,KAAKI,QAAQT,cAC3CK,KAAKV,cAGP,YAAAe,qBAAA,WACEL,KAAKF,iBAGP,YAAAQ,0BAAA,WACU,IAAAL,EAAA,WAAAA,MACR,GAAID,KAAKO,IAAIZ,cAAgBM,EAAO,CAClC,IAAIN,EAAeK,KAAKI,QAAQT,YAAcK,KAAKO,IAAIZ,YACvDA,EAAcA,GAAe,EAAIA,EAAc,EAC/CK,KAAKJ,SAAS,CACZK,MAAOD,KAAKO,IAAIZ,YAChBA,YAAW,EACXD,OAAO,MAuBb,YAAAc,OAAA,sBACUC,EAAA,WAAAA,UACF,aAAEZ,EAAA,EAAAA,OAAQF,EAAA,EAAAA,YAEhB,OACE,yBAAKe,UAAW,eAA8B,IAAhBf,EAAoB,OAAS,IAAMgB,IAAK,SAAAA,GAAS,EAAKP,QAAUO,IAC5F,yBAAKC,MAAO,CAAEC,UAAW,cAAchB,EAAM,OAASa,UAAU,UAAUC,IAAK,SAAAA,GAAS,EAAKJ,IAAMI,IAAQF,KAInH,EAjEA,CAA4B,IAAMK,WAkEnB","file":"js/37.02db29b08c84c3012dcf.bundle.js","sourcesContent":["import React from 'react'\ninterface IProps {\n  musicName: string\n}\n\ninterface IState {\n  wrapperWidth: number,\n  width: number,\n  offset: number,\n  onOff: boolean,\n  offsetWidth: number\n}\n\nclass FloatingTitle extends React.Component<IProps, IState> {\n\n  dom\n  wrapper\n  interval\n\n  componentWillMount () {\n    this.setState({\n      width: 0,\n      offset: 0,\n      onOff: false,\n      offsetWidth: 0\n    })\n  }\n\n  componentDidMount () {\n    this.setState({ wrapperWidth: this.wrapper.offsetWidth })\n    this.doInterval()\n  }\n\n  componentWillUnmount () {\n    this.clearInterval()\n  }\n\n  componentWillReceiveProps () {\n    const { width } = this.state\n    if (this.dom.offsetWidth !== width) {\n      let offsetWidth = (this.wrapper.offsetWidth - this.dom.offsetWidth)\n      offsetWidth = offsetWidth <= 0 ? offsetWidth : 0\n      this.setState({\n        width: this.dom.offsetWidth,\n        offsetWidth,\n        onOff: false\n      })\n    }\n  }\n\n  doInterval = () => {\n    this.interval = setInterval(() => {\n      this.intervalContent()\n    }, 3000)\n  }\n\n  intervalContent = () => {\n    const { onOff, offsetWidth } = this.state\n    this.setState({\n      onOff: !onOff,\n      offset: onOff ? 0 : offsetWidth\n    })\n  }\n\n  clearInterval = () => {\n    if (this.interval) { clearInterval(this.interval) }\n  }\n\n  render () {\n    const { musicName } = this.props\n    const { offset, offsetWidth } = this.state\n\n    return (\n      <div className={`music-name ${offsetWidth === 0 ? 'flex' : ''}`} ref={ref => { this.wrapper = ref }}>\n        <div style={{ transform: `translateX(${offset}px)` }} className='content' ref={ref => { this.dom = ref }}>{musicName}</div>\n      </div>\n    )\n  }\n}\nexport default FloatingTitle\n"],"sourceRoot":""}