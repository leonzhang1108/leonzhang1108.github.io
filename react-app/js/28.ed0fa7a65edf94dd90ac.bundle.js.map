{"version":3,"sources":["webpack:///./src/img/justice_league.jpg","webpack:///./node_modules/imgzoomer/dist/imgzoomer.esm.js","webpack:///./src/pages/Widgets/index.tsx"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","Zoomer","el","options","this","canvas","ctx","times","outerTimes","currentTimes","lastX","lastY","lastMouseX","lastMouseY","top","left","img","zoomImg","callback","svgDragging","handleMouseDown","bind","handleMouseMove","handleMouseUp","handleMouseWheel","initCanvas","value","_elm","document","querySelector","concat","getContext","calculateCanvasSize","console","error","_ref","width","height","wrapperWidth","wrapperHeight","url","_this","Image","onload","render","removeEvents","initEvents","src","_left","_top","sTop","sLeft","_ref2","calculate","clearRect","drawImage","e","offsetX","offsetY","movedX","movedY","_this2","factor","Math","pow","wheelDelta","requestAnimationFrame","_","imgWidth","imgHeight","ratio","imgRatio","parentElement","addEventListener","removeEventListener","preventDefault","stopPropagation","zoom","clicked","resetTopLeft","drag","isUndefined","v","undefined","SVGLabelEditor","imgZoomer","pointsList","blockList","temp","dragging","polygonMove","mousedownX","mousedownY","circleDragging","group","index","isRectangle","svgMousedown","svgMousemove","svgMouseup","_wrapper","rerender","dx","dy","_this$temp$index","_x","x","_y","y","rerenderTempPoints","resetMousedownPoint","_this$pointsList$grou","renderSingleArea","_offsetX","_offsetY","_index","_dx","_dy","map","_this$temp$","x0","y0","_this$calculateAddPoi","calculateAddPoint","x1","y1","getRectangle","isDragging","tagName","button","addTempPoint","splice","addPointList","push","removeTempGroup","rerenderExsitPoints","tempWrapper","remove","wrapper","p","clientX","clientY","_this$_wrapper$getBou","getBoundingClientRect","offsetLeft","offsetTop","type","createElementNS","_ref3","forEach","points","calculatedPoints","g","renderGroup","polygon","getElementsByTagName","reRenderPolygon","line","circle","_ref4","x2","y2","reRenderLine","p2","reRenderCircle","_this3","renderTempGroup","_ref5","c","call","createSVGElement","id","setAttribute","appendChild","_ref6","_this4","split","removeGroup","convertPoints2String","_ref7","_ref8","_this5","_ref8$p","_ref8$p2","setStrokeWidth","_g","_i","getAttribute","parseInt","append","_ref9","_ref10","_this6","_ref10$p","calculateSinglePoint","_ref11","join","getPoints","info","title","content","svgLabelEditor","item","componentDidMount","draw","componentWillUnmount","className","onClick","Component","connect","component","mapStateToProps","state","common","contentHeight","contentWidth"],"mappings":"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","file":"js/28.ed0fa7a65edf94dd90ac.bundle.js","sourcesContent":["export default __webpack_public_path__ + \"img/justice_league.052b3.jpg\";","/*!\n * imgzoomer v1.0.2\n * https://github.com/leonzhang1108/imgzoomer\n * Released under the MIT License.\n */\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar Zoomer =\n/*#__PURE__*/\nfunction () {\n  function Zoomer(el, options) {\n    _classCallCheck(this, Zoomer);\n\n    this.canvas = null;\n    this.ctx = null;\n    this.times = 1;\n    this.outerTimes;\n    this.currentTimes = 1;\n    this.lastX = 0;\n    this.lastY = 0;\n    this.lastMouseX = 0;\n    this.lastMouseY = 0;\n    this.top = null;\n    this.left = null;\n    this.img = null;\n    this.zoomImg = null;\n    this.callback = options.callback;\n    this.svgDragging = false;\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleMouseWheel = this.handleMouseWheel.bind(this);\n    this.initCanvas(el, options);\n  }\n\n  _createClass(Zoomer, [{\n    key: \"initCanvas\",\n    value: function initCanvas(el, options) {\n      var _elm = document.querySelector(\"#\".concat(el));\n\n      this.canvas = _elm;\n      this.ctx = _elm.getContext('2d');\n\n      if (!options) {\n        console.error('width and height need to specify');\n        return;\n      }\n\n      this.calculateCanvasSize(options);\n    }\n  }, {\n    key: \"calculateCanvasSize\",\n    value: function calculateCanvasSize(_ref) {\n      var width = _ref.width,\n          height = _ref.height;\n      var canvas = this.canvas;\n\n      if (canvas) {\n        this.wrapperWidth = canvas.width = width;\n        this.wrapperHeight = canvas.height = height;\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(url) {\n      var _this = this;\n\n      var img = this.img = new Image();\n\n      img.onload = function () {\n        _this.render();\n\n        _this.removeEvents();\n\n        _this.initEvents();\n      };\n\n      img.src = url;\n    }\n  }, {\n    key: \"render\",\n    value: function render(options) {\n      var _left = 0;\n      var _top = 0;\n\n      if (options) {\n        _left = options.left;\n        _top = options.top;\n      }\n\n      var sTop = this.top,\n          sLeft = this.left,\n          currentTimes = this.currentTimes,\n          times = this.times,\n          wrapperWidth = this.wrapperWidth,\n          wrapperHeight = this.wrapperHeight,\n          ctx = this.ctx;\n\n      var _ref2 = this.zoomImg || this.calculate(this.img),\n          width = _ref2.width,\n          height = _ref2.height;\n\n      if (!options) {\n        if (sTop && sLeft) {\n          _left = sLeft;\n          _top = sTop;\n        } else {\n          _left = (wrapperWidth - width) / 2;\n          _top = (wrapperHeight - height) / 2;\n        }\n      }\n\n      _left = _left + ((this.lastMouseX || 0) - _left) * (1 - currentTimes);\n      _top = _top + ((this.lastMouseY || 0) - _top) * (1 - currentTimes);\n      this.lastX = _left;\n      this.lastY = _top;\n      ctx.clearRect(0, 0, wrapperWidth, wrapperHeight);\n      ctx.drawImage(this.img, _left, _top, width * times, height * times);\n      this.callback && this.callback({\n        times: this.outerTimes || 1,\n        top: _top,\n        left: _left\n      });\n    }\n  }, {\n    key: \"drag\",\n    value: function drag(e) {\n      var offsetX = e.offsetX,\n          offsetY = e.offsetY;\n      var sTop = this.top,\n          sLeft = this.left;\n\n      var _left = sLeft + offsetX - this.movedX;\n\n      var _top = sTop + offsetY - this.movedY;\n\n      this.render({\n        left: _left,\n        top: _top\n      });\n    }\n  }, {\n    key: \"zoom\",\n    value: function zoom(e) {\n      var _this2 = this;\n\n      var factor = Math.pow(1.1, e.wheelDelta / 300);\n      this.times *= factor;\n      this.currentTimes *= factor;\n      this.outerTimes *= factor;\n      requestAnimationFrame(function (_) {\n        _this2.render();\n      });\n    }\n  }, {\n    key: \"calculate\",\n    value: function calculate(img) {\n      var wrapperWidth = this.wrapperWidth,\n          wrapperHeight = this.wrapperHeight;\n      var imgWidth = img.width,\n          imgHeight = img.height;\n      var ratio = imgHeight / imgWidth - wrapperHeight / wrapperWidth;\n      var imgRatio = imgHeight / imgWidth;\n\n      if (!this.zoomImg) {\n        this.zoomImg = {};\n\n        if (ratio > 0) {\n          this.outerTimes = wrapperHeight / imgHeight;\n          this.zoomImg.height = wrapperHeight;\n          this.zoomImg.width = wrapperHeight / imgRatio;\n        } else {\n          this.outerTimes = wrapperWidth / imgWidth;\n          this.zoomImg.width = wrapperWidth;\n          this.zoomImg.height = wrapperWidth * imgRatio;\n        }\n      }\n\n      return this.zoomImg;\n    }\n  }, {\n    key: \"initEvents\",\n    value: function initEvents() {\n      var parentElement = this.canvas.parentElement.parentElement;\n      parentElement.addEventListener('wheel', this.handleMouseWheel);\n      parentElement.addEventListener('mousedown', this.handleMouseDown);\n      parentElement.addEventListener('mousemove', this.handleMouseMove);\n      parentElement.addEventListener('mouseup', this.handleMouseUp);\n    }\n  }, {\n    key: \"removeEvents\",\n    value: function removeEvents() {\n      var parentElement = this.canvas.parentElement.parentElement;\n      parentElement.removeEventListener('wheel', this.handleMouseWheel);\n      parentElement.removeEventListener('mousedown', this.handleMouseDown);\n      parentElement.removeEventListener('mousemove', this.handleMouseMove);\n      parentElement.removeEventListener('mouseup', this.handleMouseUp);\n    }\n  }, {\n    key: \"handleMouseWheel\",\n    value: function handleMouseWheel(e) {\n      if (this.lastMouseX && this.lastMouseY) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.zoom(e);\n      }\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(e) {\n      var offsetX = e.offsetX,\n          offsetY = e.offsetY;\n      this.clicked = true;\n      this.movedX = offsetX;\n      this.movedY = offsetY;\n      this.resetTopLeft();\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(e) {\n      if (this.svgDragging) return;\n      var offsetX = e.offsetX,\n          offsetY = e.offsetY;\n      var currentTimes = this.currentTimes;\n      this.lastMouseX = offsetX;\n      this.lastMouseY = offsetY;\n\n      if (currentTimes !== 1) {\n        this.currentTimes = 1;\n      }\n\n      if (this.clicked) {\n        this.drag(e);\n      } else {\n        this.resetTopLeft();\n      }\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(e) {\n      this.svgDragging = false;\n      this.clicked = false;\n      this.movedX = 0;\n      this.movedY = 0;\n      this.resetTopLeft();\n    }\n  }, {\n    key: \"resetTopLeft\",\n    value: function resetTopLeft() {\n      var left = this.left,\n          top = this.top,\n          lastX = this.lastX,\n          lastY = this.lastY;\n\n      if (lastX !== left || lastY !== top) {\n        this.left = lastX;\n        this.top = lastY;\n      }\n    }\n  }]);\n\n  return Zoomer;\n}();\n\nvar isUndefined = function isUndefined(v) {\n  return v === undefined;\n};\nvar getRectangle = function getRectangle(_ref) {\n  var x0 = _ref.x0,\n      y0 = _ref.y0,\n      x1 = _ref.x1,\n      y1 = _ref.y1;\n  return [{\n    x: x0,\n    y: y0\n  }, {\n    x: x1,\n    y: y0\n  }, {\n    x: x1,\n    y: y1\n  }, {\n    x: x0,\n    y: y1\n  }, {\n    x: x0,\n    y: y0\n  }];\n};\n\nvar SVGLabelEditor =\n/*#__PURE__*/\nfunction () {\n  function SVGLabelEditor(el, _ref) {\n    var imgZoomer = _ref.imgZoomer,\n        pointsList = _ref.pointsList;\n\n    _classCallCheck(this, SVGLabelEditor);\n\n    if (!imgZoomer) {\n      console.error('imgZoomer need to specify');\n      return;\n    }\n\n    this.pointsList = pointsList || [];\n    this.blockList = [];\n    this.temp = [];\n    this.dragging = false;\n    this.clicked = false;\n    this.polygonMove = false;\n    this.imgZoomer = imgZoomer;\n    this.mousedownX = 0;\n    this.mousedownY = 0;\n    this.circleDragging = false;\n    this.group = undefined;\n    this.index = undefined;\n    this.isRectangle = false;\n    this.svgMousedown = this.svgMousedown.bind(this);\n    this.svgMousemove = this.svgMousemove.bind(this);\n    this.svgMouseup = this.svgMouseup.bind(this);\n    this._wrapper = document.querySelector(\"#\".concat(el));\n    this.imgZoomer.callback = this.rerender.bind(this);\n    this.removeEvents();\n    this.initEvents();\n  }\n\n  _createClass(SVGLabelEditor, [{\n    key: \"initEvents\",\n    value: function initEvents() {\n      this._wrapper.addEventListener('mousedown', this.svgMousedown);\n\n      this._wrapper.addEventListener('mousemove', this.svgMousemove);\n\n      this._wrapper.addEventListener('mouseup', this.svgMouseup);\n    }\n  }, {\n    key: \"removeEvents\",\n    value: function removeEvents() {\n      this._wrapper.removeEventListener('mousedown', this.svgMousedown);\n\n      this._wrapper.removeEventListener('mousemove', this.svgMousemove);\n\n      this._wrapper.removeEventListener('mouseup', this.svgMouseup);\n    }\n  }, {\n    key: \"svgMousedown\",\n    value: function svgMousedown() {\n      this.clicked = true;\n    }\n  }, {\n    key: \"setIsRectangle\",\n    value: function setIsRectangle(v) {\n      this.isRectangle = v || false;\n    }\n  }, {\n    key: \"svgMousemove\",\n    value: function svgMousemove(e) {\n      var _this = this;\n\n      if (this.clicked) {\n        this.dragging = true;\n      } // drag circle\n\n\n      if (this.circleDragging) {\n        var offsetX = e.offsetX,\n            offsetY = e.offsetY;\n        var group = this.group,\n            index = this.index,\n            times = this.times,\n            mousedownX = this.mousedownX,\n            mousedownY = this.mousedownY;\n        var dx = offsetX - mousedownX;\n        var dy = offsetY - mousedownY;\n\n        if (!isUndefined(index) && !isUndefined(group)) {\n          var _this$pointsList$grou = this.pointsList[group][index],\n              x = _this$pointsList$grou.x,\n              y = _this$pointsList$grou.y;\n          this.pointsList[group][index] = {\n            x: x + dx / times,\n            y: y + dy / times\n          };\n          this.renderSingleArea(this.pointsList[group], group);\n          this.resetMousedownPoint(e);\n        } else {\n          var _this$temp$index = this.temp[index],\n              _x = _this$temp$index.x,\n              _y = _this$temp$index.y;\n          this.temp[index] = {\n            x: _x + dx / times,\n            y: _y + dy / times\n          };\n          this.rerenderTempPoints();\n          this.resetMousedownPoint(e);\n        }\n      } // drag polygon\n\n\n      if (this.imgZoomer.svgDragging && !this.circleDragging) {\n        var _offsetX = e.offsetX,\n            _offsetY = e.offsetY;\n        var _index = this.index;\n\n        var _dx = _offsetX - this.mousedownX;\n\n        var _dy = _offsetY - this.mousedownY;\n\n        this.pointsList[_index] = this.pointsList[_index].map(function (_ref2) {\n          var x = _ref2.x,\n              y = _ref2.y;\n          return {\n            x: x + _dx / _this.times,\n            y: y + _dy / _this.times\n          };\n        });\n        this.renderSingleArea(this.pointsList[_index], _index);\n        this.resetMousedownPoint(e);\n      }\n\n      if (this.isRectangle && this.temp.length) {\n        var _this$temp$ = this.temp[0],\n            x0 = _this$temp$.x,\n            y0 = _this$temp$.y;\n\n        var _this$calculateAddPoi = this.calculateAddPoint(e),\n            x1 = _this$calculateAddPoi.x,\n            y1 = _this$calculateAddPoi.y;\n\n        this.temp = getRectangle({\n          x0: x0,\n          y0: y0,\n          x1: x1,\n          y1: y1\n        });\n        this.rerenderTempPoints();\n      }\n    }\n  }, {\n    key: \"svgMouseup\",\n    value: function svgMouseup(e) {\n      this.clicked = false;\n      this.circleDragging = false;\n      this.imgZoomer.svgDragging = false;\n      this.group = undefined;\n      this.index = undefined;\n      if (this.isDragging()) return;\n\n      switch (e.target.tagName) {\n        case 'svg':\n          e.button !== 2 && this.addTempPoint(e);\n          break;\n\n        case 'circle':\n          if (this.isRectangle && this.temp.length) {\n            this.temp.splice(this.temp.length - 1);\n            this.addPointList();\n          }\n\n          break;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      var dragging = this.dragging;\n      this.dragging = false;\n      return dragging;\n    }\n  }, {\n    key: \"addPointList\",\n    value: function addPointList() {\n      if (this.temp.length < 3) return;\n      this.pointsList.push(this.temp);\n      this.removeTempGroup();\n      this.rerenderExsitPoints();\n    }\n  }, {\n    key: \"removeTempGroup\",\n    value: function removeTempGroup() {\n      this.temp = [];\n      var tempWrapper = document.querySelector('#temp');\n      tempWrapper && tempWrapper.remove();\n    }\n  }, {\n    key: \"removeGroup\",\n    value: function removeGroup(index) {\n      this.pointsList[index] = [];\n      var wrapper = document.querySelector(\"#svginner-\".concat(index));\n      wrapper && wrapper.remove();\n    }\n  }, {\n    key: \"addTempPoint\",\n    value: function addTempPoint(e) {\n      var p = this.calculateAddPoint(e);\n      this.temp.push(p);\n      this.rerenderTempPoints();\n    }\n  }, {\n    key: \"calculateAddPoint\",\n    value: function calculateAddPoint(e) {\n      var clientX = e.clientX,\n          clientY = e.clientY;\n\n      var _this$_wrapper$getBou = this._wrapper.getBoundingClientRect(),\n          offsetLeft = _this$_wrapper$getBou.left,\n          offsetTop = _this$_wrapper$getBou.top;\n\n      var top = this.top,\n          left = this.left,\n          times = this.times;\n      var x = (clientX - (left || 0) - offsetLeft) / times;\n      var y = (clientY - (top || 0) - offsetTop) / times;\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"createSVGElement\",\n    value: function createSVGElement(type) {\n      return document.createElementNS('http://www.w3.org/2000/svg', type);\n    }\n  }, {\n    key: \"rerender\",\n    value: function rerender(_ref3) {\n      var times = _ref3.times,\n          top = _ref3.top,\n          left = _ref3.left;\n      this.times = times;\n      this.top = top;\n      this.left = left;\n      this.rerenderExsitPoints();\n      this.rerenderTempPoints();\n    }\n  }, {\n    key: \"rerenderExsitPoints\",\n    value: function rerenderExsitPoints() {\n      // exists points\n      this.pointsList.forEach(this.renderSingleArea.bind(this));\n    }\n  }, {\n    key: \"renderSingleArea\",\n    value: function renderSingleArea(points, index) {\n      var _this2 = this;\n\n      var length = points.length;\n      var calculatedPoints = this.calculate(points);\n      if (!this.pointsList[index].length) return; // add group\n\n      var g = this.renderGroup(index); // render polygon\n\n      var polygon = g.getElementsByTagName('polygon')[0];\n      this.reRenderPolygon({\n        polygon: polygon,\n        g: g,\n        index: index\n      }); // render lines and circles\n\n      calculatedPoints.forEach(function (p, i) {\n        var line = g.getElementsByTagName('line')[i];\n        var circle = g.getElementsByTagName('circle')[i];\n\n        var _ref4 = i === length - 1 ? calculatedPoints[0] : calculatedPoints[i + 1],\n            x2 = _ref4.x,\n            y2 = _ref4.y;\n\n        _this2.reRenderLine({\n          line: line,\n          p: p,\n          p2: {\n            x2: x2,\n            y2: y2\n          },\n          g: g,\n          i: i\n        });\n\n        _this2.reRenderCircle({\n          circle: circle,\n          p: p,\n          g: g,\n          i: i,\n          index: index\n        });\n      });\n    }\n  }, {\n    key: \"rerenderTempPoints\",\n    value: function rerenderTempPoints() {\n      var _this3 = this;\n\n      var g = this.renderTempGroup();\n      var calculatedPoints = this.calculate(this.temp);\n      var length = calculatedPoints.length;\n      calculatedPoints.forEach(function (p, i) {\n        var circle = g.getElementsByTagName('circle')[i];\n        var line = g.getElementsByTagName('line')[i];\n\n        var _ref5 = i === length - 1 ? calculatedPoints[0] : calculatedPoints[i + 1],\n            x2 = _ref5.x,\n            y2 = _ref5.y;\n\n        var c = _this3.reRenderCircle({\n          circle: circle,\n          p: p,\n          g: g,\n          i: i\n        });\n\n        if (i === 0) {\n          c.addEventListener('mouseup', function () {\n            return !_this3.dragging && _this3.addPointList.call(_this3);\n          });\n        }\n\n        i !== length - 1 && _this3.reRenderLine({\n          line: line,\n          p: p,\n          p2: {\n            x2: x2,\n            y2: y2\n          },\n          g: g\n        });\n      });\n    }\n  }, {\n    key: \"renderGroup\",\n    value: function renderGroup(i) {\n      var g = this._wrapper.querySelector(\"#svginner-\".concat(i));\n\n      if (!g) {\n        g = this.createSVGElement('g');\n        g.id = \"svginner-\".concat(i);\n        g.setAttribute('class', 'polygon');\n\n        this._wrapper.appendChild(g);\n      }\n\n      return g;\n    }\n  }, {\n    key: \"renderTempGroup\",\n    value: function renderTempGroup() {\n      var g = document.querySelector('#temp');\n\n      if (!g) {\n        g = this.createSVGElement('g');\n        g.id = 'temp';\n\n        this._wrapper.appendChild(g);\n      }\n\n      return g;\n    }\n  }, {\n    key: \"reRenderPolygon\",\n    value: function reRenderPolygon(_ref6) {\n      var _this4 = this;\n\n      var polygon = _ref6.polygon,\n          g = _ref6.g,\n          index = _ref6.index;\n\n      if (!polygon) {\n        polygon = this.createSVGElement('polygon');\n        polygon.setAttribute('fill', 'rgb(56, 120, 196, .5)');\n        polygon.setAttribute('cursor', 'move');\n        polygon.addEventListener('mousedown', function (e) {\n          _this4.imgZoomer.svgDragging = true;\n          _this4.index = e.target.parentElement.id.split('-')[1];\n\n          _this4.resetMousedownPoint(e);\n        });\n        polygon.addEventListener('mouseup', function (e) {\n          _this4.imgZoomer.svgDragging = false;\n          _this4.index = undefined;\n        });\n        polygon.addEventListener('contextmenu', function (e) {\n          _this4.removeGroup(index);\n\n          e.preventDefault();\n        });\n        g.appendChild(polygon);\n      }\n\n      polygon.setAttribute('points', this.convertPoints2String(this.calculate(this.pointsList[index])));\n    }\n  }, {\n    key: \"resetMousedownPoint\",\n    value: function resetMousedownPoint(_ref7) {\n      var offsetX = _ref7.offsetX,\n          offsetY = _ref7.offsetY;\n      this.mousedownX = offsetX;\n      this.mousedownY = offsetY;\n    }\n  }, {\n    key: \"reRenderLine\",\n    value: function reRenderLine(_ref8) {\n      var _this5 = this;\n\n      var line = _ref8.line,\n          _ref8$p = _ref8.p,\n          x = _ref8$p.x,\n          y = _ref8$p.y,\n          _ref8$p2 = _ref8.p2,\n          x2 = _ref8$p2.x2,\n          y2 = _ref8$p2.y2,\n          g = _ref8.g,\n          i = _ref8.i;\n\n      if (!line) {\n        line = this.createSVGElement('line');\n        line.setAttribute('stroke', 'rgb(211, 220, 230)');\n        this.setStrokeWidth({\n          line: line,\n          v: 2\n        });\n        !isUndefined(i) && line.setAttribute('index', i);\n        line.addEventListener('mouseover', function () {\n          return _this5.setStrokeWidth({\n            line: line,\n            v: 5\n          });\n        });\n        line.addEventListener('mouseout', function () {\n          return _this5.setStrokeWidth({\n            line: line,\n            v: 2\n          });\n        });\n        line.addEventListener('click', function (e) {\n          var target = e.target;\n          var parent = target.parentElement;\n          var id = parent.id;\n\n          if (id !== 'temp') {\n            var _g = id.split('-')[1];\n\n            var _i = target.getAttribute('index');\n\n            var p = _this5.calculateAddPoint(e);\n\n            _this5.pointsList[_g].splice(parseInt(_i) + 1, 0, p);\n\n            _this5.renderSingleArea(_this5.pointsList[_g], _g);\n          }\n        });\n        g.append(line);\n      }\n\n      line.setAttribute('x1', x);\n      line.setAttribute('y1', y);\n      line.setAttribute('x2', x2);\n      line.setAttribute('y2', y2);\n    }\n  }, {\n    key: \"setStrokeWidth\",\n    value: function setStrokeWidth(_ref9) {\n      var line = _ref9.line,\n          v = _ref9.v;\n      line.setAttribute('stroke-width', v);\n    }\n  }, {\n    key: \"reRenderCircle\",\n    value: function reRenderCircle(_ref10) {\n      var _this6 = this;\n\n      var circle = _ref10.circle,\n          _ref10$p = _ref10.p,\n          x = _ref10$p.x,\n          y = _ref10$p.y,\n          g = _ref10.g,\n          i = _ref10.i,\n          index = _ref10.index;\n\n      if (!circle) {\n        circle = this.createSVGElement('circle');\n        circle.setAttribute('fill', 'rgb(89, 249, 46)');\n        circle.setAttribute('cursor', 'move');\n        !isUndefined(i) && circle.setAttribute('index', i);\n        !isUndefined(index) && circle.setAttribute('group', index);\n        circle.addEventListener('mousedown', function (e) {\n          _this6.imgZoomer.svgDragging = true;\n          _this6.circleDragging = true;\n          !isUndefined(index) && (_this6.group = index);\n          _this6.index = isUndefined(i) ? e.target.getAttribute('index') : i;\n\n          _this6.resetMousedownPoint(e);\n        });\n        circle.addEventListener('mouseup', function () {\n          _this6.imgZoomer.svgDragging = false;\n          _this6.circleDragging = false;\n        });\n        g.append(circle);\n      }\n\n      circle.setAttribute('r', 6);\n      circle.setAttribute('cx', x);\n      circle.setAttribute('cy', y);\n      return circle;\n    }\n  }, {\n    key: \"calculate\",\n    value: function calculate(points) {\n      return points.map(this.calculateSinglePoint.bind(this));\n    }\n  }, {\n    key: \"calculateSinglePoint\",\n    value: function calculateSinglePoint(p) {\n      var top = this.top,\n          left = this.left,\n          times = this.times;\n      var x = p.x,\n          y = p.y;\n      return {\n        x: left + x * times,\n        y: top + y * times\n      };\n    }\n  }, {\n    key: \"convertPoints2String\",\n    value: function convertPoints2String(points) {\n      return points.map(function (_ref11) {\n        var x = _ref11.x,\n            y = _ref11.y;\n        return \"\".concat(x, \",\").concat(y);\n      }).join(' ');\n    }\n  }]);\n\n  return SVGLabelEditor;\n}();\n\nexport { Zoomer, SVGLabelEditor };\n","// import DatePicker from '@cpt/DatePicker'\n// import ImgZoomer from '@cpt/ImgZoomer'\nimport src from '@img/justice_league.jpg'\nimport Utils from '@utils'\nimport React from 'react'\nimport './index.less'\nimport * as imgzoomer from 'imgzoomer'\nimport { Button, Modal } from 'antd'\n\ninterface IProps {\n  height: number;\n  width: number;\n}\n\nclass Widgets extends React.Component<IProps> {\n  svgLabelEditor\n  imgZoomer\n\n  componentDidMount() {\n    const { height, width } = this.props\n    const { Zoomer, SVGLabelEditor } = imgzoomer\n    this.imgZoomer = new Zoomer('canvas', { width, height })\n    this.imgZoomer.draw(src)\n\n    this.svgLabelEditor = new SVGLabelEditor('svg-wrapper', {\n      imgZoomer: this.imgZoomer,\n      pointsList: [\n        [\n          { x: 415.84196194762626, y: 147.26284891271456 },\n          { x: 600.8419619476263, y: 190.26284891271456 },\n          { x: 653.8419619476264, y: 352.26284891271456 },\n          { x: 376.1088135552601, y: 340.5695301104572 }\n        ],\n        [\n          { x: 940.7072245800349, y: 338.003545055495 },\n          { x: 1013.1629207825664, y: 471.97822859979857 },\n          { x: 880.5553258458576, y: 447.37063366308996 }\n        ]\n      ]\n    })\n  }\n\n  componentWillUnmount() {\n    this.imgZoomer.removeEvents()\n    this.svgLabelEditor.removeEvents()\n  }\n\n  getPoints = () => {\n    Modal.info({\n      title: 'Points',\n      content: (\n        <div>\n          {this.svgLabelEditor.pointsList.map((item, i) => (\n            <div key={i}>\n              [\n              {item.map(({ x, y }, index) => (\n                <div key={index}>\n                  ({x}, {y})\n                </div>\n              ))}\n              ]\n            </div>\n          ))}\n        </div>\n      )\n    })\n  }\n\n  render() {\n    // const fromDate = new Date('2012-12-12')\n    // const toDate = new Date()\n    return (\n      <div className=\"widget-wrapper\">\n        {/* <DatePicker fromDate={fromDate} toDate={toDate}/> */}\n        {/* <ImgZoomer\n          wrapperHeight={height}\n          wrapperWidth={width}\n          src={src}\n        /> */}\n        <svg id=\"svg-wrapper\" />\n        <canvas id=\"canvas\" />\n        <Button className=\"btn\" type=\"primary\" onClick={this.getPoints}>\n          get points\n        </Button>\n      </div>\n    )\n  }\n}\n\nexport default Utils.connect({\n  component: Widgets,\n  mapStateToProps: state => ({\n    height: state.common.contentHeight,\n    width: state.common.contentWidth\n  })\n})\n"],"sourceRoot":""}