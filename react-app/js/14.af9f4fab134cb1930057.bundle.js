(window.webpackJsonp=window.webpackJsonp||[]).push([[14,68],{361:function(t,e,i){},435:function(t,e,i){"use strict";e.a={keyCode:{left:37,up:38,right:39,down:40}}},626:function(t,e,i){window,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n,o=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)},r=function(t){return t*(Math.PI/180)},s=function(t,e,i){for(var n,o=e.split(/[ ,]+/g),r=0;r<o.length;r+=1)n=o[r],t.addEventListener?t.addEventListener(n,i,!1):t.attachEvent&&t.attachEvent(n,i)},a=function(t,e,i){for(var n,o=e.split(/[ ,]+/g),r=0;r<o.length;r+=1)n=o[r],t.removeEventListener?t.removeEventListener(n,i):t.detachEvent&&t.detachEvent(n,i)},d=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},c=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},p=function(t,e){e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},l=function(t,e,i){var n=u(t);for(var o in n)if(n.hasOwnProperty(o))if("string"==typeof e)n[o]=e+" "+i;else{for(var r="",s=0,a=e.length;s<a;s+=1)r+=e[s]+" "+i+", ";n[o]=r.slice(0,-2)}return n},u=function(t){var e={};return e[t]="",["webkit","Moz","o"].forEach((function(i){e[i+t.charAt(0).toUpperCase()+t.slice(1)]=""})),e},h=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},f=function(t,e){if(t.length)for(var i=0,n=t.length;i<n;i+=1)e(t[i]);else e(t)},y=!!("ontouchstart"in window),m=!!window.PointerEvent,v=!!window.MSPointerEvent,g={start:"mousedown",move:"mousemove",end:"mouseup"},b={};function w(){}m?n={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:v?n={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:y?(n={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},b=g):n=g,w.prototype.on=function(t,e){var i,n=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var o=0;o<n.length;o+=1)i=n[o],this._handlers_[i]=this._handlers_[i]||[],this._handlers_[i].push(e);return this},w.prototype.off=function(t,e){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===e?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(e)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(e),1),this},w.prototype.trigger=function(t,e){var i,n=this,o=t.split(/[ ,]+/g);n._handlers_=n._handlers_||{};for(var r=0;r<o.length;r+=1)i=o[r],n._handlers_[i]&&n._handlers_[i].length&&n._handlers_[i].forEach((function(t){t.call(n,{type:i,target:n},e)}))},w.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,e){var i={};for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)?i[n]=e[n]:t.hasOwnProperty(n)&&(i[n]=t[n]);return i}(this.options,t))},w.prototype.bindEvt=function(t,e){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[e]=function(){"function"==typeof i["on"+e]?i["on"+e].apply(i,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},s(t,n[e],i._domHandlers_[e]),b[e]&&s(t,b[e],i._domHandlers_[e]),i},w.prototype.unbindEvt=function(t,e){return this._domHandlers_=this._domHandlers_||{},a(t,n[e],this._domHandlers_[e]),b[e]&&a(t,b[e],this._domHandlers_[e]),delete this._domHandlers_[e],this};var x=w;function O(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1},this.config(e),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=O.id,O.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}O.prototype=new x,O.constructor=O,O.id=0,O.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},O.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=function(t,e){var i=u("borderRadius");for(var n in i)i.hasOwnProperty(n)&&(i[n]="50%");return i}(),i=l("transition","opacity",t),n={};return n.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},n.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},n.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},h(n.el,i),h(n.back,e),h(n.front,e),this.applyStyles(n),this},O.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var i in t[e])this.ui[e].style[i]=t[e][i];return this},O.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},O.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},O.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},O.prototype.show=function(t){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout((function(){e.ui.el.style.opacity=1}),0),e.showTimeout=setTimeout((function(){e.trigger("shown",e.instance),"function"==typeof t&&t.call(this)}),e.options.fadeTime)),e},O.prototype.hide=function(t){var e=this;return e.options.dataOnly||(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout((function(){var i="dynamic"===e.options.mode?"none":"block";e.ui.el.style.display=i,"function"==typeof t&&t.call(e),e.trigger("hidden",e.instance)}),e.options.fadeTime),e.options.restJoystick&&e.setPosition(t,{x:0,y:0})),e},O.prototype.setPosition=function(t,e){var i=this;i.frontPosition={x:e.x,y:e.y};var n=i.options.fadeTime+"ms",o={};o.front=l("transition",["top","left"],n);var r={front:{}};r.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(o),i.applyStyles(r),i.restTimeout=setTimeout((function(){"function"==typeof t&&t.call(i),i.restCallback()}),i.options.fadeTime)},O.prototype.restCallback=function(){var t={};t.front=l("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},O.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},O.prototype.computeDirection=function(t){var e,i,n,o=t.angle.radian,r=Math.PI/4,s=Math.PI/2;if(o>r&&o<3*r&&!t.lockX?e="up":o>-r&&o<=r&&!t.lockY?e="left":o>3*-r&&o<=-r&&!t.lockX?e="down":t.lockY||(e="right"),t.lockY||(i=o>-s&&o<s?"left":"right"),t.lockX||(n=o>0?"up":"down"),t.force>this.options.threshold){var a,d={};for(a in this.direction)this.direction.hasOwnProperty(a)&&(d[a]=this.direction[a]);var c={};for(a in this.direction={x:i,y:n,angle:e},t.direction=this.direction,d)d[a]===this.direction[a]&&(c[a]=!0);if(c.x&&c.y&&c.angle)return t;c.x&&c.y||this.trigger("plain",t),c.x||this.trigger("plain:"+i,t),c.y||this.trigger("plain:"+n,t),c.angle||this.trigger("dir dir:"+e,t)}else this.resetDirection();return t};var _=O;function k(t,e){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=k.id,k.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,dynamicPage:!1},this.config(e),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}k.prototype=new x,k.constructor=k,k.id=0,k.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(e){if(void 0===e)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===e)return t[i];return!1}},k.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},k.prototype.begin=function(){var t=this.options;if("static"===t.mode){var e=this.createNipple(t.position,this.manager.getIdentifier());e.add(),this.idles.push(e)}},k.prototype.createNipple=function(t,e){var i=c(),n={},o=this.options;if(t.x&&t.y)n={x:t.x-(i.x+this.box.left),y:t.y-(i.y+this.box.top)};else if(t.top||t.right||t.bottom||t.left){var r=document.createElement("DIV");r.style.display="hidden",r.style.top=t.top,r.style.right=t.right,r.style.bottom=t.bottom,r.style.left=t.left,r.style.position="absolute",o.zone.appendChild(r);var s=r.getBoundingClientRect();o.zone.removeChild(r),n=t,t={x:s.left+i.x,y:s.top+i.y}}var a=new _(this,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:e,position:t,zone:o.zone,frontPosition:{x:0,y:0}});return o.dataOnly||(p(a.ui.el,n),p(a.ui.front,a.frontPosition)),this.nipples.push(a),this.trigger("added "+a.identifier+":added",a),this.manager.trigger("added "+a.identifier+":added",a),this.bindNipple(a),a},k.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},k.prototype.bindNipple=function(t){var e,i=this,n=function(t,n){e=t.type+" "+n.id+":"+t.type,i.trigger(e,n)};t.on("destroyed",i.onDestroyed.bind(i)),t.on("shown hidden rested dir plain",n),t.on("dir:up dir:right dir:down dir:left",n),t.on("plain:up plain:right plain:down plain:left",n)},k.prototype.pressureFn=function(t,e,i){var n=this,o=0;clearInterval(n.pressureIntervals[i]),n.pressureIntervals[i]=setInterval(function(){var i=t.force||t.pressure||t.webkitForce||0;i!==o&&(e.trigger("pressure",i),n.trigger("pressure "+e.identifier+":pressure",i),o=i)}.bind(n),100)},k.prototype.onstart=function(t){var e=this,i=e.options,n=t;return t=d(t),e.updateBox(),f(t,(function(o){e.actives.length<i.maxNumberOfNipples?e.processOnStart(o):n.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach((function(i){if(Object.values(n.touches).findIndex((function(t){return t.identifier===i}))<0){var o=[t[0]];o.identifier=i,e.processOnEnd(o)}})),e.actives.length<i.maxNumberOfNipples&&e.processOnStart(o))})),e.manager.bindDocument(),!1},k.prototype.processOnStart=function(t){var e,i=this,n=i.options,r=i.manager.getIdentifier(t),s=t.force||t.pressure||t.webkitForce||0,a={x:t.pageX,y:t.pageY},d=i.getOrCreate(r,a);d.identifier!==r&&i.manager.removeIdentifier(d.identifier),d.identifier=r;var c=function(e){e.trigger("start",e),i.trigger("start "+e.id+":start",e),e.show(),s>0&&i.pressureFn(t,e,e.identifier),i.processOnMove(t)};if((e=i.idles.indexOf(d))>=0&&i.idles.splice(e,1),i.actives.push(d),i.ids.push(d.identifier),"semi"!==n.mode)c(d);else{if(!(o(a,d.position)<=n.catchDistance))return d.destroy(),void i.processOnStart(t);c(d)}return d},k.prototype.getOrCreate=function(t,e){var i,n=this.options;return/(semi|static)/.test(n.mode)?(i=this.idles[0])?(this.idles.splice(0,1),i):"semi"===n.mode?this.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1):i=this.createNipple(e,t)},k.prototype.processOnMove=function(t){var e=this.options,i=this.manager.getIdentifier(t),n=this.nipples.get(i);if(function(t){return isNaN(t.buttons)?0!==t.pressure:0!==t.buttons}(t)){if(!n)return console.error("Found zombie joystick with ID "+i),void this.manager.removeIdentifier(i);if(e.dynamicPage){var s=c();d=n.el.getBoundingClientRect(),n.position={x:s.x+d.left,y:s.y+d.top}}n.identifier=i;var a=n.options.size/2,d={x:t.pageX,y:t.pageY};e.lockX&&(d.y=n.position.y),e.lockY&&(d.x=n.position.x);var l,u,h,f,y,m,v,g,b=o(d,n.position),w=(l=d,h=(u=n.position).x-l.x,f=u.y-l.y,function(t){return t*(180/Math.PI)}(Math.atan2(f,h))),x=r(w),O=b/a,_={distance:b,position:d};b>a&&(b=a,y=n.position,m=b,g={x:0,y:0},v=r(v=w),g.x=y.x-m*Math.cos(v),g.y=y.y-m*Math.sin(v),d=g);var k=d.x-n.position.x,E=d.y-n.position.y;n.frontPosition={x:k,y:E},e.dataOnly||p(n.ui.front,n.frontPosition);var T={identifier:n.identifier,position:d,force:O,pressure:t.force||t.pressure||t.webkitForce||0,distance:b,angle:{radian:x,degree:w},vector:{x:k/a,y:-E/a},raw:_,instance:n,lockX:e.lockX,lockY:e.lockY};(T=n.computeDirection(T)).angle={radian:r(180-w),degree:180-w},n.trigger("move",T),this.trigger("move "+n.id+":move",T)}else this.processOnEnd(t)},k.prototype.processOnEnd=function(t){var e=this,i=e.options,n=e.manager.getIdentifier(t),o=e.nipples.get(n),r=e.manager.removeIdentifier(o.identifier);o&&(i.dataOnly||o.hide((function(){"dynamic"===i.mode&&(o.trigger("removed",o),e.trigger("removed "+o.id+":removed",o),e.manager.trigger("removed "+o.id+":removed",o),o.destroy())})),clearInterval(e.pressureIntervals[o.identifier]),o.resetDirection(),o.trigger("end",o),e.trigger("end "+o.id+":end",o),e.ids.indexOf(o.identifier)>=0&&e.ids.splice(e.ids.indexOf(o.identifier),1),e.actives.indexOf(o)>=0&&e.actives.splice(e.actives.indexOf(o),1),/(semi|static)/.test(i.mode)?e.idles.push(o):e.nipples.indexOf(o)>=0&&e.nipples.splice(e.nipples.indexOf(o),1),e.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(e.manager.ids[r.id]=r.identifier))},k.prototype.onDestroyed=function(t,e){this.nipples.indexOf(e)>=0&&this.nipples.splice(this.nipples.indexOf(e),1),this.actives.indexOf(e)>=0&&this.actives.splice(this.actives.indexOf(e),1),this.idles.indexOf(e)>=0&&this.idles.splice(this.idles.indexOf(e),1),this.ids.indexOf(e.identifier)>=0&&this.ids.splice(this.ids.indexOf(e.identifier),1),this.manager.removeIdentifier(e.identifier),this.manager.unbindDocument()},k.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach((function(t){t.destroy()})),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var E=k;function T(t){var e,i=this;return i.ids={},i.index=0,i.collections=[],i.config(t),i.prepareCollections(),s(window,"resize",(function(t){clearTimeout(e),e=setTimeout((function(){var t,e=c();i.collections.forEach((function(i){i.forEach((function(i){t=i.el.getBoundingClientRect(),i.position={x:e.x+t.left,y:e.y+t.top}}))}))}),100)})),i.collections}T.prototype=new x,T.constructor=T,T.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var i;return t.collections.every((function(t){return!(i=t.get(e))})),i}},T.prototype.create=function(t){return this.createCollection(t)},T.prototype.createCollection=function(t){var e=new E(this,t);return this.bindCollection(e),this.collections.push(e),e},T.prototype.bindCollection=function(t){var e,i=this,n=function(t,n){e=t.type+" "+n.id+":"+t.type,i.trigger(e,n)};t.on("destroyed",i.onDestroyed.bind(i)),t.on("shown hidden rested dir plain",n),t.on("dir:up dir:right dir:down dir:left",n),t.on("plain:up plain:right plain:down plain:left",n)},T.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},T.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},T.prototype.getIdentifier=function(t){var e;return t?void 0===(e=void 0===t.identifier?t.pointerId:t.identifier)&&(e=this.latest||0):e=this.index,void 0===this.ids[e]&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]},T.prototype.removeIdentifier=function(t){var e={};for(var i in this.ids)if(this.ids[i]===t){e.id=i,e.identifier=this.ids[i],delete this.ids[i];break}return e},T.prototype.onmove=function(t){return this.onAny("move",t),!1},T.prototype.onend=function(t){return this.onAny("end",t),!1},T.prototype.oncancel=function(t){return this.onAny("end",t),!1},T.prototype.onAny=function(t,e){var i,n=this,o="processOn"+t.charAt(0).toUpperCase()+t.slice(1);return e=d(e),f(e,(function(t){i=n.getIdentifier(t),f(n.collections,function(t,e,i){i.ids.indexOf(e)>=0&&(i[o](t),t._found_=!0)}.bind(null,t,i)),t._found_||n.removeIdentifier(i)})),!1},T.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach((function(t){t.destroy()})),this.off()},T.prototype.onDestroyed=function(t,e){if(this.collections.indexOf(e)<0)return!1;this.collections.splice(this.collections.indexOf(e),1)};var P=new T;e.default={create:function(t){return P.create(t)},factory:P}}]).default},94:function(t,e,i){"use strict";i.r(e);var n,o,r,s=i(0),a=i.n(s),d=i(21),c=(i(361),i(435)),p=i(55),l=i.n(p),u=(i(63),i(626)),h=i.n(u),f=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),y=c.a.keyCode;!function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(r||(r={}));var m=r.Up,v=r.Down,g=r.Left,b=r.Right,w=((o={})[m]=v,o[v]=m,o[g]=b,o[b]=g,o),x=function(t,e){var i=d.a.random(0,e-1);return t.includes(i)?x(t,e):i},O=function(t){function e(e){var i=t.call(this,e)||this;return i.size=(i.props.isMobile,20),i.rowCount=~~(i.props.w/i.size),i.colCount=~~(i.props.h/i.size),i.max=i.rowCount*i.colCount,i.direction=b,i.snake=[0,1,2,3,4,5,6,7,8,9],i.friut=x(i.snake,i.max),i.speed=200,i.count=0,i.state={isGameOver:!1,hint:""},i.keydown=function(t){switch(t.keyCode){case y.up:i.go(m);break;case y.down:i.go(v);break;case y.left:i.go(g);break;case y.right:i.go(b)}},i.go=function(t){i.state.isGameOver||(i.direction!==w[t]&&(i.direction=t),i.init())},i.init=function(){clearInterval(i.interval),i.doCycle(),i.interval=setInterval(i.doCycle,i.speed)},i.reset=function(){i.setState({isGameOver:!1},(function(){i.clearReact(),i.snake=[0,1,2,3,4,5,6,7,8,9],i.direction=b,i.speed=200,i.init()}))},i.doCycle=function(){i.resetSnake(),i.drawSnake()},i.clearReact=function(){var t=i.props,e=t.w,n=t.h;i.ctx.clearRect(0,0,e,n)},i.resetSnake=function(){i.clearReact();var t=i.snake[i.snake.length-1],e=i.getHead(t);if(t===i.friut){if(i.friut=x(i.snake,i.max),7===i.count)return i.speed*=.8,i.count=0,void i.init();i.count++}else i.snake.shift();i.snake.includes(e)?(clearInterval(i.interval),i.setState({hint:"Game Over",isGameOver:!0})):i.snake.length===i.max?(clearInterval(i.interval),i.setState({hint:"You Win!!!",isGameOver:!0})):i.snake.push(e)},i.drawFriut=function(){i.draw(i.friut,"#666")},i.getHead=function(t){var e,n=i,o=n.rowCount,r=n.colCount,s=n.max;switch(n.direction){case g:return~~((e=t-1)/o)!=~~(t/o)||t<=0?t+o-1:e;case b:return~~((e=t+1)/o)!=~~(t/o)?t-o+1:e;case m:return(e=t-o)<0?s+t%o:e;case v:return~~((e=t+o)/o)>r?t%o:e}},i.drawSnake=function(){i.drawFriut();var t=i.snake.length;i.snake.forEach((function(e,n){return i.draw(e,n!==t-1?"#666":"#333")}))},i.draw=function(t,e){i.ctx.fillStyle=e,i.ctx.fillRect(t%i.rowCount*i.size+1,~~(t/i.rowCount)*i.size+1,i.size-1,i.size-1)},document.addEventListener("keydown",i.keydown),i}return f(e,t),e.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.keydown)},e.prototype.componentDidMount=function(){var t=this;this.ctx=this.canvas.getContext("2d"),this.init();var e=h.a.create({zone:this.remote,color:"#777"});e.on("dir:up",(function(){return t.go(m)})),e.on("dir:down",(function(){return t.go(v)})),e.on("dir:left",(function(){return t.go(g)})),e.on("dir:right",(function(){return t.go(b)}))},e.prototype.render=function(){var t=this,e=this.props,i=e.w,n=e.h,o=this.state,r=o.isGameOver,s=o.hint;return a.a.createElement("div",{className:"snake-wrapper"},a.a.createElement("canvas",{ref:function(e){return t.canvas=e},width:i,height:n,style:{backgroundColor:"#dcdcdc"}}),a.a.createElement("div",{className:"remote-area",ref:function(e){return t.remote=e}}),r?a.a.createElement("div",{className:"over"},a.a.createElement("div",{className:"hint"},s),a.a.createElement(l.a,{type:"primary",onClick:this.reset},"Reset")):"")},e}(a.a.Component);e.default=d.a.connect({component:O,mapStateToProps:function(t){return{w:t.common.contentWidth,h:t.common.contentHeight,isMobile:t.common.isMobile}}})}}]);